Source: https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts

[ Skip Navigation ](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts#app-main)
  * [Global Nav Open Menu](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts#ac-gn-menustate)[Global Nav Close Menu](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts)
  * [Apple Developer](https://developer.apple.com/)


[ Search Developer Cancel  ](https://developer.apple.com/search/)
  * [Apple Developer](https://developer.apple.com/)
  * [News](https://developer.apple.com/news/)
  * [Discover](https://developer.apple.com/discover/)
  * [Design](https://developer.apple.com/design/)
  * [Develop](https://developer.apple.com/develop/)
  * [Distribute](https://developer.apple.com/distribute/)
  * [Support](https://developer.apple.com/support/)
  * [Account](https://developer.apple.com/account/)
  * [](https://developer.apple.com/search/)


Cancel 
Only search within “Documentation”
### Quick Links
  * [Downloads](https://developer.apple.com/download/)
  * [Documentation](https://developer.apple.com/documentation/)
  * [Sample Code](https://developer.apple.com/documentation/samplecode/)
  * [Videos](https://developer.apple.com/videos/)
  * [Forums](https://developer.apple.com/forums/)

5 Quick Links
[ Documentation ](https://developer.apple.com/documentation)
[ Open Menu ](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts)
  * SwiftLanguage:  Swift  Objective-C 
Language: 
    * Swift 
    * [ Objective-C ](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts)


[](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts)
## [ UIKit  ](https://developer.apple.com/documentation/uikit)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
1 of 46 symbols inside <root>
Essentials
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
2 of 46 symbols inside <root> [Adopting Liquid Glass](https://developer.apple.com/documentation/technologyoverviews/adopting-liquid-glass)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
3 of 46 symbols inside <root> [UIKit updates](https://developer.apple.com/documentation/updates/uikit)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
4 of 46 symbols inside <root> [About App Development with UIKit](https://developer.apple.com/documentation/uikit/about-app-development-with-uikit)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
5 of 46 symbols inside <root> containing 3 symbols[Protecting the User’s Privacy](https://developer.apple.com/documentation/uikit/protecting-the-user-s-privacy)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
6 of 46 symbols inside <root>
App structure
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
7 of 46 symbols inside <root> containing 26 symbols[App and environment](https://developer.apple.com/documentation/uikit/app-and-environment)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
8 of 46 symbols inside <root> containing 15 symbols[Documents, data, and pasteboard](https://developer.apple.com/documentation/uikit/documents-data-and-pasteboard)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
9 of 46 symbols inside <root> containing 11 symbols[Resource management](https://developer.apple.com/documentation/uikit/resource-management)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
10 of 46 symbols inside <root> containing 12 symbols[App extensions](https://developer.apple.com/documentation/uikit/app-extensions)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
11 of 46 symbols inside <root> containing 8 symbols[Interprocess communication](https://developer.apple.com/documentation/uikit/interprocess-communication)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
12 of 46 symbols inside <root> containing 27 symbols[Mac Catalyst](https://developer.apple.com/documentation/uikit/mac-catalyst)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
13 of 46 symbols inside <root>
User interface
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
14 of 46 symbols inside <root> containing 70 symbols[Views and controls](https://developer.apple.com/documentation/uikit/views-and-controls)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
1 of 70 symbols inside -393359169 
View fundamentals
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
2 of 70 symbols inside -393359169 containing 251 symbols[UIView](https://developer.apple.com/documentation/uikit/uiview)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
3 of 70 symbols inside -393359169 [UIKit Catalog: Creating and customizing views and controls](https://developer.apple.com/documentation/uikit/uikit-catalog-creating-and-customizing-views-and-controls)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
4 of 70 symbols inside -393359169 
Container views
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
T
27 of 42 symbols inside 840669288 [NSCollectionLayoutGroupCustomItemProvider](https://developer.apple.com/documentation/uikit/nscollectionlayoutgroupcustomitemprovider)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
28 of 42 symbols inside 840669288 
Layout updates
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
28 of 42 symbols inside 840669288 
Layout updates
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
29 of 42 symbols inside 840669288 containing 17 symbols[NSCollectionLayoutVisibleItem](https://developer.apple.com/documentation/uikit/nscollectionlayoutvisibleitem)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
T
30 of 42 symbols inside 840669288 [NSCollectionLayoutSectionVisibleItemsInvalidationHandler](https://developer.apple.com/documentation/uikit/nscollectionlayoutsectionvisibleitemsinvalidationhandler)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
31 of 42 symbols inside 840669288 containing 5 symbols[UICollectionViewUpdateItem](https://developer.apple.com/documentation/uikit/uicollectionviewupdateitem)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
32 of 42 symbols inside 840669288 containing 3 symbols[UICollectionViewFocusUpdateContext](https://developer.apple.com/documentation/uikit/uicollectionviewfocusupdatecontext)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
33 of 42 symbols inside 840669288 containing 17 symbols[UICollectionViewLayoutInvalidationContext](https://developer.apple.com/documentation/uikit/uicollectionviewlayoutinvalidationcontext)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
34 of 42 symbols inside 840669288 
Manual layouts
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
35 of 42 symbols inside 840669288 [Customizing collection view layouts](https://developer.apple.com/documentation/uikit/customizing-collection-view-layouts)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
36 of 42 symbols inside 840669288 containing 53 symbols[UICollectionViewLayout](https://developer.apple.com/documentation/uikit/uicollectionviewlayout)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
37 of 42 symbols inside 840669288 containing 21 symbols[UICollectionViewFlowLayout](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayout)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
38 of 42 symbols inside 840669288 containing 10 symbols[UICollectionViewTransitionLayout](https://developer.apple.com/documentation/uikit/uicollectionviewtransitionlayout)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
39 of 42 symbols inside 840669288 containing 19 symbols[UICollectionViewLayoutAttributes](https://developer.apple.com/documentation/uikit/uicollectionviewlayoutattributes)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
40 of 42 symbols inside 840669288 containing 3 symbols[UICollectionViewFlowLayoutInvalidationContext](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayoutinvalidationcontext)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
41 of 42 symbols inside 840669288 
Data
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
S
42 of 42 symbols inside 840669288 containing 38 symbols[NSDiffableDataSourceSnapshot](https://developer.apple.com/documentation/uikit/nsdiffabledatasourcesnapshot-swift.struct)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
21 of 34 symbols inside 939719722 
Selection management
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
22 of 34 symbols inside 939719722 [Changing the appearance of selected and highlighted cells](https://developer.apple.com/documentation/uikit/changing-the-appearance-of-selected-and-highlighted-cells)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
23 of 34 symbols inside 939719722 [Selecting multiple items with a two-finger pan gesture](https://developer.apple.com/documentation/uikit/selecting-multiple-items-with-a-two-finger-pan-gesture)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
24 of 34 symbols inside 939719722 
Drag and drop
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
25 of 34 symbols inside 939719722 [Supporting Drag and Drop in Collection Views](https://developer.apple.com/documentation/uikit/supporting-drag-and-drop-in-collection-views)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
26 of 34 symbols inside 939719722 containing 11 symbols[UICollectionViewDragDelegate](https://developer.apple.com/documentation/uikit/uicollectionviewdragdelegate)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
27 of 34 symbols inside 939719722 containing 11 symbols[UICollectionViewDropDelegate](https://developer.apple.com/documentation/uikit/uicollectionviewdropdelegate)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
28 of 34 symbols inside 939719722 containing 12 symbols[UICollectionViewDropCoordinator](https://developer.apple.com/documentation/uikit/uicollectionviewdropcoordinator)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
29 of 34 symbols inside 939719722 containing 2 symbols[UICollectionViewDropPlaceholder](https://developer.apple.com/documentation/uikit/uicollectionviewdropplaceholder)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
30 of 34 symbols inside 939719722 containing 6 symbols[UICollectionViewDropProposal](https://developer.apple.com/documentation/uikit/uicollectionviewdropproposal)
192 items were found. Tab back to navigate through them. 
/ 
Navigator is ready 
  * [ UIKit ](https://developer.apple.com/documentation/uikit)
  * [ Views and controls ](https://developer.apple.com/documentation/uikit/views-and-controls)
  * [ Collection views ](https://developer.apple.com/documentation/uikit/collection-views)
  * [ Layouts ](https://developer.apple.com/documentation/uikit/layouts)
  * [ Customizing collection view layouts ](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts)
  *     * [ Views and controls ](https://developer.apple.com/documentation/uikit/views-and-controls)
    * [ Collection views ](https://developer.apple.com/documentation/uikit/collection-views)
    * [ Layouts ](https://developer.apple.com/documentation/uikit/layouts)
    * Customizing collection view layouts 


Sample Code
# Customizing collection view layouts
Customize a view layout by changing the size of cells in the flow or implementing a mosaic style.
[ Download ](https://docs-assets.developer.apple.com/published/ebe75d1feb4d/CustomizingCollectionViewLayouts.zip)
iOS 12.0+iPadOS 12.0+Xcode 13.0+
## [Overview](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts#Overview)
To lay out UICollectionView cells in a simple grid, you can use [`UICollectionViewFlowLayout`](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayout) directly. For more flexibility, you can subclass [`UICollectionViewLayout`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout) to create advanced layouts.
This sample app demonstrates two custom layout subclasses:
  * `ColumnFlowLayout` — A `UICollectionViewFlowLayout` subclass that arranges cells in a list format for narrow screens, or as a grid for wider screens. See “For a Simple Grid, Size Cells Dynamically,” below.
  * `MosaicLayout` — A `UICollectionViewLayout` subclass that lays out cells in a mosaic-style, nonconforming grid. See “For a Complex Grid, Define Cell Sizes Explicitly,” below.


The app opens to the Friends view controller, which uses a column flow layout to display a list of people. Tapping any cell takes you to the Feed view controller, which uses a mosaic layout to display photos from the user’s photo library.
Tapping the cloud icon to the right of the navigation bar demonstrates batched animations for inserting, deleting, moving, and reloading items in the collection view. For more information, see “Perform Batch Updates,” below. Using pull-to-refresh on the collection view resets the data.
### [For a simple grid, size cells dynamically](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts#For-a-simple-grid-size-cells-dynamically)
`ColumnFlowLayout` is a subclass of [`UICollectionViewFlowLayout`](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayout) that uses the size of the collection view to determine the width of its cells. If only one cell fits comfortably horizontally, the layout arranges the cells to occupy the entire width of the collection view. Otherwise, the layout displays multiple columns of cells with a fixed width.
In practice, on iPhone devices in portrait mode, `ColumnFlowLayout` displays a single vertical column of cells. In landscape mode, or on an iPad, it displays a grid layout.
Use the [`prepare()`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout/prepare\(\)) function to compute the available screen width of the device and set the [`itemSize`](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayout/itemsize) property accordingly.
```
override func prepare() {
    super.prepare()


    guard let collectionView = collectionView else { return }
    
    let availableWidth = collectionView.bounds.inset(by: collectionView.layoutMargins).width
    let maxNumColumns = Int(availableWidth / minColumnWidth)
    let cellWidth = (availableWidth / CGFloat(maxNumColumns)).rounded(.down)
    
    self.itemSize = CGSize(width: cellWidth, height: cellHeight)
    self.sectionInset = UIEdgeInsets(top: self.minimumInteritemSpacing, left: 0.0, bottom: 0.0, right: 0.0)
    self.sectionInsetReference = .fromSafeArea
}

```

### [For a complex grid, define cell sizes explicitly](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts#For-a-complex-grid-define-cell-sizes-explicitly)
If you need more customization than is possible with a subclass of [`UICollectionViewFlowLayout`](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayout), subclass [`UICollectionViewLayout`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout) instead.
`MosaicLayout` is a `UICollectionViewLayout` subclass that displays an arbitrary number of cells with differing sizes and aspect ratios. The `FeedViewController` class uses a mosaic layout to display images from the user’s photo library. Cells are organized into rows in one of four styles, from a single cell to multiple cells in varying layouts.
![Images showing a row of four rectangles, each representing a mosaic style. On the left, a single cell. Second from left, two equal-size cells. Third from left, one cell occupying two-thirds of the area, and two stacked cells to the left of the larger cell. Last, one cell occupying two-thirds of the area, and two stacked cells to the right of the larger cell.](https://docs-assets.developer.apple.com/published/cba49a90929a4052e9ce4b671ad41ef7/CellLayouts.png)
**Calculate cell dimensions**
The [`prepare()`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout/prepare\(\)) method is called whenever a layout is invalidated. Override this method to calculate the position and size of every cell, as well as the total dimensions for the entire layout.
```
override func prepare() {
    super.prepare()
    
    guard let collectionView = collectionView else { return }


    // Reset cached information.
    cachedAttributes.removeAll()
    contentBounds = CGRect(origin: .zero, size: collectionView.bounds.size)
    
    // For every item in the collection view:
    //  - Prepare the attributes.
    //  - Store attributes in the cachedAttributes array.
    //  - Combine contentBounds with attributes.frame.
    let count = collectionView.numberOfItems(inSection: 0)
    
    var currentIndex = 0
    var segment: MosaicSegmentStyle = .fullWidth
    var lastFrame: CGRect = .zero
    
    let cvWidth = collectionView.bounds.size.width
    
    while currentIndex < count {
        let segmentFrame = CGRect(x: 0, y: lastFrame.maxY + 1.0, width: cvWidth, height: 200.0)
        
        var segmentRects = [CGRect]()
        switch segment {
        case .fullWidth:
            segmentRects = [segmentFrame]
            
        case .fiftyFifty:
            let horizontalSlices = segmentFrame.dividedIntegral(fraction: 0.5, from: .minXEdge)
            segmentRects = [horizontalSlices.first, horizontalSlices.second]
            
        case .twoThirdsOneThird:
            let horizontalSlices = segmentFrame.dividedIntegral(fraction: (2.0 / 3.0), from: .minXEdge)
            let verticalSlices = horizontalSlices.second.dividedIntegral(fraction: 0.5, from: .minYEdge)
            segmentRects = [horizontalSlices.first, verticalSlices.first, verticalSlices.second]
            
        case .oneThirdTwoThirds:
            let horizontalSlices = segmentFrame.dividedIntegral(fraction: (1.0 / 3.0), from: .minXEdge)
            let verticalSlices = horizontalSlices.first.dividedIntegral(fraction: 0.5, from: .minYEdge)
            segmentRects = [verticalSlices.first, verticalSlices.second, horizontalSlices.second]
        }
        
        // Create and cache layout attributes for calculated frames.
        for rect in segmentRects {
            let attributes = UICollectionViewLayoutAttributes(forCellWith: IndexPath(item: currentIndex, section: 0))
            attributes.frame = rect
            
            cachedAttributes.append(attributes)
            contentBounds = contentBounds.union(lastFrame)
            
            currentIndex += 1
            lastFrame = rect
        }


        // Determine the next segment style.
        switch count - currentIndex {
        case 1:
            segment = .fullWidth
        case 2:
            segment = .fiftyFifty
        default:
            switch segment {
            case .fullWidth:
                segment = .fiftyFifty
            case .fiftyFifty:
                segment = .twoThirdsOneThird
            case .twoThirdsOneThird:
                segment = .oneThirdTwoThirds
            case .oneThirdTwoThirds:
                segment = .fiftyFifty
            }
        }
    }
}

```

**Provide the content size**
Override the [`collectionViewContentSize`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout/collectionviewcontentsize) property, providing a size for the collection view.
```
override var collectionViewContentSize: CGSize {
    return contentBounds.size
}

```

**Define the layout attributes**
Override [`layoutAttributesForElements(in:)`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout/layoutattributesforelements\(in:\)), defining the layout attributes for a geometric region. The collection view calls this function periodically to display items, which is known as _querying by geometric region_.
```
override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
    var attributesArray = [UICollectionViewLayoutAttributes]()
    
    // Find any cell that sits within the query rect.
    guard let lastIndex = cachedAttributes.indices.last,
          let firstMatchIndex = binSearch(rect, start: 0, end: lastIndex) else { return attributesArray }
    
    // Starting from the match, loop up and down through the array until all the attributes
    // have been added within the query rect.
    for attributes in cachedAttributes[..<firstMatchIndex].reversed() {
        guard attributes.frame.maxY >= rect.minY else { break }
        attributesArray.append(attributes)
    }
    
    for attributes in cachedAttributes[firstMatchIndex...] {
        guard attributes.frame.minY <= rect.maxY else { break }
        attributesArray.append(attributes)
    }
    
    return attributesArray
}

```

Also provide the layout attributes for a specific item by implementing [`layoutAttributesForItem(at:)`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout/layoutattributesforitem\(at:\)). The collection view calls this function periodically to display one particular item, which is known as _querying by index path_.
```
override func layoutAttributesForItem(at indexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
    return cachedAttributes[indexPath.item]
}

```

Because these functions are called often, they can affect the performance of your app. To make them as efficient as possible, follow the example code as closely as you can.
**Handle bounds changes**
The [`shouldInvalidateLayout(forBoundsChange:)`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout/shouldinvalidatelayout\(forboundschange:\)) function is called for every bounds change from the collection view, or whenever its size or origin changes. This function is also called frequently during scrolling. The default implementation returns `false`, or, if the size and origin change, it returns `true`.
```
override func shouldInvalidateLayout(forBoundsChange newBounds: CGRect) -> Bool {
    guard let collectionView = collectionView else { return false }
    return !newBounds.size.equalTo(collectionView.bounds.size)
}

```

For optimum performance, this sample performs a binary search inside [`layoutAttributesForElements(in:)`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout/layoutattributesforelements\(in:\)) instead of a linear search of the attributes it needs for each element in a given bounds area.
### [Perform batch updates](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts#Perform-batch-updates)
Tapping the top-right button in the navigation bar triggers the collection view to perform a _batch update_ of multiple animated operations (insert, delete, move, and reload) of its collection view cells all at the same time.
Within a call to [`performBatchUpdates(_:completion:)`](https://developer.apple.com/documentation/uikit/uicollectionview/performbatchupdates\(_:completion:\)), the system simultaneously animates all insert, delete, move, and reload operations. In this sample, the app batches updates by processing an array of `PersonUpdate` objects, each of which encapsulates one update:
  * `insert` with a `Person` object and insertion index.
  * `delete` with an index.
  * `move` from one index to another.
  * `reload` with an index.


First, the `reload` operations are performed without animation because no cell movement is involved:
```
// Perform any cell reloads without animation because there is no movement.
UIView.performWithoutAnimation {
    collectionView.performBatchUpdates({
        for update in remoteUpdates {
            if case let .reload(index) = update {
                people[index].isUpdated = true
                collectionView.reloadItems(at: [IndexPath(item: index, section: 0)])
            }
        }
    })
}

```

Next, the remaining operations are animated:
```
// Animate all other update types together.
collectionView.performBatchUpdates({
    var deletes = [Int]()
    var inserts = [(person:Person, index:Int)]()


    for update in remoteUpdates {
        switch update {
        case let .delete(index):
            collectionView.deleteItems(at: [IndexPath(item: index, section: 0)])
            deletes.append(index)
            
        case let .insert(person, index):
            collectionView.insertItems(at: [IndexPath(item: index, section: 0)])
            inserts.append((person, index))
            
        case let .move(fromIndex, toIndex):
            // Updates that move a person are split into an addition and a deletion.
            collectionView.moveItem(at: IndexPath(item: fromIndex, section: 0),
                                    to: IndexPath(item: toIndex, section: 0))
            deletes.append(fromIndex)
            inserts.append((people[fromIndex], toIndex))
            
        default: break
        }
    }
    
    // Apply deletions in descending order.
    for deletedIndex in deletes.sorted().reversed() {
        people.remove(at: deletedIndex)
    }
    
    // Apply insertions in ascending order.
    let sortedInserts = inserts.sorted(by: { (personA, personB) -> Bool in
        return personA.index <= personB.index
    })
    for insertion in sortedInserts {
        people.insert(insertion.person, at: insertion.index)
    }
    
    // The update button is enabled only if the list still has people in it.
    navigationItem.rightBarButtonItem?.isEnabled = !people.isEmpty
})

```

## [See Also](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts#see-also)
### [Manual layouts](https://developer.apple.com/documentation/UIKit/customizing-collection-view-layouts#Manual-layouts)
[`class UICollectionViewLayout`](https://developer.apple.com/documentation/uikit/uicollectionviewlayout)
An abstract base class for generating layout information for a collection view.
[`class UICollectionViewFlowLayout`](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayout)
A layout object that organizes items into a grid with optional header and footer views for each section.
[`class UICollectionViewTransitionLayout`](https://developer.apple.com/documentation/uikit/uicollectionviewtransitionlayout)
A special type of layout object that lets you implement behaviors when changing from one layout to another in your collection view.
[`class UICollectionViewLayoutAttributes`](https://developer.apple.com/documentation/uikit/uicollectionviewlayoutattributes)
A layout object that manages the layout-related attributes for a given item in a collection view.
[`class UICollectionViewFlowLayoutInvalidationContext`](https://developer.apple.com/documentation/uikit/uicollectionviewflowlayoutinvalidationcontext)
A set of properties for determining whether to recompute the size of items or their position in the layout.
Current page is Customizing collection view layouts 
[Apple](https://www.apple.com)
  1. [Developer](https://developer.apple.com/)
  2. [ Documentation ](https://developer.apple.com/documentation/)


###  Platforms 
Toggle Menu 
  * [iOS](https://developer.apple.com/ios/)
  * [iPadOS](https://developer.apple.com/ipados/)
  * [macOS](https://developer.apple.com/macos/)
  * [tvOS](https://developer.apple.com/tvos/)
  * [visionOS](https://developer.apple.com/visionos/)
  * [watchOS](https://developer.apple.com/watchos/)


###  Tools 
Toggle Menu 
  * [Swift](https://developer.apple.com/swift/)
  * [SwiftUI](https://developer.apple.com/swiftui/)
  * [Swift Playground](https://developer.apple.com/swift-playground/)
  * [TestFlight](https://developer.apple.com/testflight/)
  * [Xcode](https://developer.apple.com/xcode/)
  * [Xcode Cloud](https://developer.apple.com/xcode-cloud/)
  * [SF Symbols](https://developer.apple.com/sf-symbols/)


###  Topics & Technologies 
Toggle Menu 
  * [Accessibility](https://developer.apple.com/accessibility/)
  * [Accessories](https://developer.apple.com/accessories/)
  * [App Extension](https://developer.apple.com/app-extensions/)
  * [App Store](https://developer.apple.com/app-store/)
  * [Audio & Video](https://developer.apple.com/audio/)
  * [Augmented Reality](https://developer.apple.com/augmented-reality/)
  * [Design](https://developer.apple.com/design/)
  * [Distribution](https://developer.apple.com/distribute/)
  * [Education](https://developer.apple.com/education/)
  * [Fonts](https://developer.apple.com/fonts/)
  * [Games](https://developer.apple.com/games/)
  * [Health & Fitness](https://developer.apple.com/health-fitness/)
  * [In-App Purchase](https://developer.apple.com/in-app-purchase/)
  * [Localization](https://developer.apple.com/localization/)
  * [Maps & Location](https://developer.apple.com/maps/)
  * [Machine Learning & AI](https://developer.apple.com/machine-learning/)
  * [Open Source](https://opensource.apple.com/)
  * [Security](https://developer.apple.com/security/)
  * [Safari & Web](https://developer.apple.com/safari/)


###  Resources 
Toggle Menu 
  *   * [Documentation](https://developer.apple.com/documentation/)
  * [Tutorials](https://developer.apple.com/learn/)
  * [Downloads](https://developer.apple.com/download/)
  * [Forums](https://developer.apple.com/forums/)
  * [Videos](https://developer.apple.com/videos/)


###  Support 
Toggle Menu 
  * [Support Articles](https://developer.apple.com/support/articles/)
  * [Contact Us](https://developer.apple.com/contact/)
  * [Bug Reporting](https://developer.apple.com/bug-reporting/)
  * [System Status](https://developer.apple.com/system-status/)


###  Account 
Toggle Menu 
  * [Apple Developer](https://developer.apple.com/account/)
  * [App Store Connect](https://appstoreconnect.apple.com/)
  * [Certificates, IDs, & Profiles](https://developer.apple.com/account/ios/certificate/)
  * [Feedback Assistant](https://feedbackassistant.apple.com/)


###  Programs 
Toggle Menu 
  * [Apple Developer Program](https://developer.apple.com/programs/)
  * [Apple Developer Enterprise Program](https://developer.apple.com/programs/enterprise/)
  * [App Store Small Business Program](https://developer.apple.com/app-store/small-business-program/)
  * [MFi Program](https://mfi.apple.com/)
  * [News Partner Program](https://developer.apple.com/programs/news-partner/)
  * [Video Partner Program](https://developer.apple.com/programs/video-partner/)
  * [Security Bounty Program](https://developer.apple.com/security-bounty/)
  * [Security Research Device Program](https://developer.apple.com/programs/security-research-device/)


###  Events 
Toggle Menu 
  * [Meet with Apple](https://developer.apple.com/events/)
  * [Apple Developer Centers](https://developer.apple.com/events/developer-centers/)
  * [App Store Awards](https://developer.apple.com/app-store/app-store-awards/)
  * [Apple Design Awards](https://developer.apple.com/design/awards/)
  * [Apple Developer Academies](https://developer.apple.com/academies/)
  * [WWDC](https://developer.apple.com/wwdc/)


To submit feedback on documentation, visit [Feedback Assistant](applefeedback://new?form_identifier=developertools.fba&answers%5B%3Aarea%5D=seedADC%3Adevpubs&answers%5B%3Adoc_type_req%5D=Technology%20Documentation&answers%5B%3Adocumentation_link_req%5D=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FUIKit%2Fcustomizing-collection-view-layouts).
Select a color scheme preference
Light
Dark
Auto
Copyright © 2025 [Apple Inc.](https://www.apple.com) All rights reserved. 
[ Terms of Use ](https://www.apple.com/legal/internet-services/terms/site.html)[ Privacy Policy ](https://www.apple.com/legal/privacy/)[ Agreements and Guidelines ](https://developer.apple.com/support/terms/)
