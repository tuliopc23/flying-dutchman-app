Source: https://developer.apple.com/documentation/Foundation/about-apple-file-system

[ Skip Navigation ](https://developer.apple.com/documentation/Foundation/about-apple-file-system#app-main)
  * [Global Nav Open Menu](https://developer.apple.com/documentation/Foundation/about-apple-file-system#ac-gn-menustate)[Global Nav Close Menu](https://developer.apple.com/documentation/Foundation/about-apple-file-system)
  * [Apple Developer](https://developer.apple.com/)


[ Search Developer Cancel  ](https://developer.apple.com/search/)
  * [Apple Developer](https://developer.apple.com/)
  * [News](https://developer.apple.com/news/)
  * [Discover](https://developer.apple.com/discover/)
  * [Design](https://developer.apple.com/design/)
  * [Develop](https://developer.apple.com/develop/)
  * [Distribute](https://developer.apple.com/distribute/)
  * [Support](https://developer.apple.com/support/)
  * [Account](https://developer.apple.com/account/)
  * [](https://developer.apple.com/search/)


Cancel 
Only search within “Documentation”
### Quick Links
  * [Downloads](https://developer.apple.com/download/)
  * [Documentation](https://developer.apple.com/documentation/)
  * [Sample Code](https://developer.apple.com/documentation/samplecode/)
  * [Videos](https://developer.apple.com/videos/)
  * [Forums](https://developer.apple.com/forums/)

5 Quick Links
[ Documentation ](https://developer.apple.com/documentation)
[ Open Menu ](https://developer.apple.com/documentation/Foundation/about-apple-file-system)
  * SwiftLanguage:  Swift  Objective-C 
Language: 
    * Swift 
    * [ Objective-C ](https://developer.apple.com/documentation/Foundation/about-apple-file-system)


[](https://developer.apple.com/documentation/Foundation/about-apple-file-system)
## [ Foundation  ](https://developer.apple.com/documentation/foundation)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
17 of 17 symbols inside -218890218 containing 24 symbols[File System Error Codes](https://developer.apple.com/documentation/foundation/file-system-error-codes)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
16 of 64 symbols inside <root>
Files and Data Persistence
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
17 of 64 symbols inside <root> containing 17 symbols[File System](https://developer.apple.com/documentation/foundation/file-system)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
1 of 17 symbols inside -218890218 
File system operations
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
2 of 17 symbols inside -218890218 [Improving performance and stability when accessing the file system](https://developer.apple.com/documentation/foundation/improving-performance-and-stability-when-accessing-the-file-system)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
3 of 17 symbols inside -218890218 [Using the file system effectively](https://developer.apple.com/documentation/foundation/using-the-file-system-effectively)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
4 of 17 symbols inside -218890218 containing 136 symbols[FileManager](https://developer.apple.com/documentation/foundation/filemanager)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
5 of 17 symbols inside -218890218 containing 20 symbols[FileManagerDelegate](https://developer.apple.com/documentation/foundation/filemanagerdelegate)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
6 of 17 symbols inside -218890218 [About Apple File System](https://developer.apple.com/documentation/foundation/about-apple-file-system)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
7 of 17 symbols inside -218890218 
Coordinated file access
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
8 of 17 symbols inside -218890218 containing 29 symbols[NSFilePresenter](https://developer.apple.com/documentation/foundation/nsfilepresenter)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
9 of 17 symbols inside -218890218 containing 5 symbols[NSFileAccessIntent](https://developer.apple.com/documentation/foundation/nsfileaccessintent)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
10 of 17 symbols inside -218890218 containing 23 symbols[NSFileCoordinator](https://developer.apple.com/documentation/foundation/nsfilecoordinator)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
11 of 17 symbols inside -218890218 
Managed file access
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
12 of 17 symbols inside -218890218 containing 70 symbols[FileHandle](https://developer.apple.com/documentation/foundation/filehandle)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
13 of 17 symbols inside -218890218 containing 2 symbols[NSFileSecurity](https://developer.apple.com/documentation/foundation/nsfilesecurity)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
14 of 17 symbols inside -218890218 containing 31 symbols[NSFileVersion](https://developer.apple.com/documentation/foundation/nsfileversion)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
15 of 17 symbols inside -218890218 containing 44 symbols[FileWrapper](https://developer.apple.com/documentation/foundation/filewrapper)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
16 of 17 symbols inside -218890218 
Errors
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
17 of 17 symbols inside -218890218 containing 24 symbols[File System Error Codes](https://developer.apple.com/documentation/foundation/file-system-error-codes)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
18 of 64 symbols inside <root> containing 32 symbols[Archives and Serialization](https://developer.apple.com/documentation/foundation/archives-and-serialization)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
19 of 64 symbols inside <root> containing 8 symbols[Settings](https://developer.apple.com/documentation/foundation/settings)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
20 of 64 symbols inside <root> containing 5 symbols[Spotlight](https://developer.apple.com/documentation/foundation/spotlight)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
21 of 64 symbols inside <root> containing 17 symbols[iCloud](https://developer.apple.com/documentation/foundation/icloud)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
22 of 64 symbols inside <root> [Optimizing Your App’s Data for iCloud Backup](https://developer.apple.com/documentation/foundation/optimizing-your-app-s-data-for-icloud-backup)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
23 of 64 symbols inside <root>
Networking
81 items were found. Tab back to navigate through them. 
/ 
Navigator is ready 
  * [ Foundation ](https://developer.apple.com/documentation/foundation)
  * [ File System ](https://developer.apple.com/documentation/foundation/file-system)
  * [ About Apple File System ](https://developer.apple.com/documentation/Foundation/about-apple-file-system)
  *     * [ File System ](https://developer.apple.com/documentation/foundation/file-system)
    * About Apple File System 


Article
# About Apple File System
Use high-level APIs to get the most out of Apple File System.
## [Overview](https://developer.apple.com/documentation/Foundation/about-apple-file-system#overview)
Apple File System replaces HFS Plus as the default file system for iOS 10.3 and later, and for macOS High Sierra and later. Apple File System offers improved file system fundamentals as well as several new features, including cloning, snapshots, space sharing, fast directory sizing, atomic safe-save, and sparse files.
Using high-level APIs in Foundation, such as [`FileManager`](https://developer.apple.com/documentation/foundation/filemanager) and [`FileHandle`](https://developer.apple.com/documentation/foundation/filehandle), to interact with files takes advantage of the new behavior provided by Apple File System automatically, without requiring changes your code.
If you need to interact with the file system directly, without using any frameworks or the operating system, read [Apple File System Reference](https://developer.apple.com/go/?id=apfs-file-format-spec).
### [Clones Reduce the Cost of Copying](https://developer.apple.com/documentation/Foundation/about-apple-file-system#Clones-Reduce-the-Cost-of-Copying)
A clone is a copy of a file or directory that occupies no additional space on disk. Clones let you make fast, power-efficient file copies on the same volume. The [`copyItem(at:to:)`](https://developer.apple.com/documentation/foundation/filemanager/copyitem\(at:to:\)) and [`copyItem(atPath:toPath:)`](https://developer.apple.com/documentation/foundation/filemanager/copyitem\(atpath:topath:\)) methods of [`FileManager`](https://developer.apple.com/documentation/foundation/filemanager) automatically create a clone for Apple File System volumes, as shown in the listing below.
```
let origin = URL(fileURLWithPath: "/path/to/origin")
let destination = URL(fileURLWithPath: "/path/to/destination")
do {
    // Creates a clone for Apple File System volumes, or makes
    // a copy immediately for other file systems.
    try FileManager.default.copyItem(at: origin, to: destination)
} catch {
    // ... Handle the error ...
}

```

Modifications to the data are written elsewhere, and both files continue to share the unmodified blocks. You can use this behavior, for example, to reduce storage space required for document revisions and copies. The figure below shows a file named “My file” and its copy “My file copy” that have two blocks in common and one block that varies between them. On file systems like HFS Plus, they’d each need three on-disk blocks, but on an Apple File System volume, the two common blocks are shared.
![](https://docs-assets.developer.apple.com/published/27b2bfeee815b6f57e42c609f653edfa/media-2991758%402x.png)
### [Free Space Is Shared Between Volumes](https://developer.apple.com/documentation/Foundation/about-apple-file-system#Free-Space-Is-Shared-Between-Volumes)
Many files systems, including HFS Plus, support only a single volume per partition. Because free space can’t be shared across partitions, each volume’s size is set when partitioning the storage device, and each volume can only grow into its available free space. In contrast, Apple File System supports multiple volumes within a single partition, which allows all of those volumes to share their free space. All of the volumes in an Apple File System partition can grow and shrink independently; space that’s freed when one volume shrinks can be used when another volume grows.
![](https://docs-assets.developer.apple.com/published/252b67dfdb6ad872f88aec6c8fa47ca2/media-3001372%402x.png)
Each volume in the container can use the shared free space, so they all include that amount when reporting the available free space. For example, when you call [`attributesOfFileSystem(forPath:)`](https://developer.apple.com/documentation/foundation/filemanager/attributesoffilesystem\(forpath:\)) method of [`FileManager`](https://developer.apple.com/documentation/foundation/filemanager), the amount that’s reported includes all of the shared free space.
```
if let attributes = try? FileManager.default.attributesOfFileSystem(forPath: "/") {
    let availableFreeSpace = attributes[.systemFreeSize] 
}

```

Computing the sum of each volume’s available free space isn’t a reliable way to determine the total free space within a partition. In general, check whether the space required to perform a particular operation is available on the volume, rather than trying to calculate the partition’s total free space.
### [Sparse Files Don’t Allocate Empty Blocks](https://developer.apple.com/documentation/Foundation/about-apple-file-system#Sparse-Files-Dont-Allocate-Empty-Blocks)
In file systems that support sparse files, including Apple File System, on-disk blocks are allocated only when those blocks are actually written to. This behavior lets files that contain blank sections, such as disk images and database dumps, be saved on disk more efficiently.
When you use the [`FileHandle`](https://developer.apple.com/documentation/foundation/filehandle) class to create a new write handle, a sparse file is created automatically. For example, if you write a block of data, then seek one block by calling [`seek(toFileOffset:)`](https://developer.apple.com/documentation/foundation/filehandle/seek\(tofileoffset:\)), and then write another block, the data stored on disk is organized as follows:
![](https://docs-assets.developer.apple.com/published/c665c832bc9bddb8d859d4c44b40eeaf/media-2991755%402x.png)
HFS Plus and other formats that don’t support sparse files allocate three blocks for the file, one for each block that was written, and one empty block in the middle. With support for sparse files, only two blocks are allocated, and the empty block is omitted.
Because the sparse file in the Apple File system example above doesn’t contain a blank second block on disk, writing to the second block later results in blocks that are out of order, as shown in the figure below. High-level APIs like [`FileHandle`](https://developer.apple.com/documentation/foundation/filehandle) handle this fragmentation for you, and the performance loss due to fragmentation isn’t usually significant.
![](https://docs-assets.developer.apple.com/published/1264e600bdc2cf31e25eecf92c104409/media-2991757%402x.png)
You can’t use [`FileHandle`](https://developer.apple.com/documentation/foundation/filehandle) to create a sparse file from an existing file that has blank data already stored on disk.
## [See Also](https://developer.apple.com/documentation/Foundation/about-apple-file-system#see-also)
### [File system operations](https://developer.apple.com/documentation/Foundation/about-apple-file-system#File-system-operations)
[Improving performance and stability when accessing the file system](https://developer.apple.com/documentation/foundation/improving-performance-and-stability-when-accessing-the-file-system)
Prevent data loss and app crashes by interacting with the file system in a coordinated, asynchronous manner and by avoiding unnecessary disk I/O.
[Using the file system effectively](https://developer.apple.com/documentation/foundation/using-the-file-system-effectively)
Gain access to benefits like automatic backup or purging by using purpose-built directories provided by the system.
[`class FileManager`](https://developer.apple.com/documentation/foundation/filemanager)
A convenient interface to the contents of the file system, and the primary means of interacting with it.
[`protocol FileManagerDelegate`](https://developer.apple.com/documentation/foundation/filemanagerdelegate)
The interface a file manager’s delegate uses to intervene during operations or if an error occurs.
Current page is About Apple File System 
[Apple](https://www.apple.com)
  1. [Developer](https://developer.apple.com/)
  2. [ Documentation ](https://developer.apple.com/documentation/)


###  Platforms 
Toggle Menu 
  * [iOS](https://developer.apple.com/ios/)
  * [iPadOS](https://developer.apple.com/ipados/)
  * [macOS](https://developer.apple.com/macos/)
  * [tvOS](https://developer.apple.com/tvos/)
  * [visionOS](https://developer.apple.com/visionos/)
  * [watchOS](https://developer.apple.com/watchos/)


###  Tools 
Toggle Menu 
  * [Swift](https://developer.apple.com/swift/)
  * [SwiftUI](https://developer.apple.com/swiftui/)
  * [Swift Playground](https://developer.apple.com/swift-playground/)
  * [TestFlight](https://developer.apple.com/testflight/)
  * [Xcode](https://developer.apple.com/xcode/)
  * [Xcode Cloud](https://developer.apple.com/xcode-cloud/)
  * [SF Symbols](https://developer.apple.com/sf-symbols/)


###  Topics & Technologies 
Toggle Menu 
  * [Accessibility](https://developer.apple.com/accessibility/)
  * [Accessories](https://developer.apple.com/accessories/)
  * [App Extension](https://developer.apple.com/app-extensions/)
  * [App Store](https://developer.apple.com/app-store/)
  * [Audio & Video](https://developer.apple.com/audio/)
  * [Augmented Reality](https://developer.apple.com/augmented-reality/)
  * [Design](https://developer.apple.com/design/)
  * [Distribution](https://developer.apple.com/distribute/)
  * [Education](https://developer.apple.com/education/)
  * [Fonts](https://developer.apple.com/fonts/)
  * [Games](https://developer.apple.com/games/)
  * [Health & Fitness](https://developer.apple.com/health-fitness/)
  * [In-App Purchase](https://developer.apple.com/in-app-purchase/)
  * [Localization](https://developer.apple.com/localization/)
  * [Maps & Location](https://developer.apple.com/maps/)
  * [Machine Learning & AI](https://developer.apple.com/machine-learning/)
  * [Open Source](https://opensource.apple.com/)
  * [Security](https://developer.apple.com/security/)
  * [Safari & Web](https://developer.apple.com/safari/)


###  Resources 
Toggle Menu 
  *   * [Documentation](https://developer.apple.com/documentation/)
  * [Tutorials](https://developer.apple.com/learn/)
  * [Downloads](https://developer.apple.com/download/)
  * [Forums](https://developer.apple.com/forums/)
  * [Videos](https://developer.apple.com/videos/)


###  Support 
Toggle Menu 
  * [Support Articles](https://developer.apple.com/support/articles/)
  * [Contact Us](https://developer.apple.com/contact/)
  * [Bug Reporting](https://developer.apple.com/bug-reporting/)
  * [System Status](https://developer.apple.com/system-status/)


###  Account 
Toggle Menu 
  * [Apple Developer](https://developer.apple.com/account/)
  * [App Store Connect](https://appstoreconnect.apple.com/)
  * [Certificates, IDs, & Profiles](https://developer.apple.com/account/ios/certificate/)
  * [Feedback Assistant](https://feedbackassistant.apple.com/)


###  Programs 
Toggle Menu 
  * [Apple Developer Program](https://developer.apple.com/programs/)
  * [Apple Developer Enterprise Program](https://developer.apple.com/programs/enterprise/)
  * [App Store Small Business Program](https://developer.apple.com/app-store/small-business-program/)
  * [MFi Program](https://mfi.apple.com/)
  * [News Partner Program](https://developer.apple.com/programs/news-partner/)
  * [Video Partner Program](https://developer.apple.com/programs/video-partner/)
  * [Security Bounty Program](https://developer.apple.com/security-bounty/)
  * [Security Research Device Program](https://developer.apple.com/programs/security-research-device/)


###  Events 
Toggle Menu 
  * [Meet with Apple](https://developer.apple.com/events/)
  * [Apple Developer Centers](https://developer.apple.com/events/developer-centers/)
  * [App Store Awards](https://developer.apple.com/app-store/app-store-awards/)
  * [Apple Design Awards](https://developer.apple.com/design/awards/)
  * [Apple Developer Academies](https://developer.apple.com/academies/)
  * [WWDC](https://developer.apple.com/wwdc/)


To submit feedback on documentation, visit [Feedback Assistant](applefeedback://new?form_identifier=developertools.fba&answers%5B%3Aarea%5D=seedADC%3Adevpubs&answers%5B%3Adoc_type_req%5D=Technology%20Documentation&answers%5B%3Adocumentation_link_req%5D=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FFoundation%2Fabout-apple-file-system).
Select a color scheme preference
Light
Dark
Auto
Copyright © 2025 [Apple Inc.](https://www.apple.com) All rights reserved. 
[ Terms of Use ](https://www.apple.com/legal/internet-services/terms/site.html)[ Privacy Policy ](https://www.apple.com/legal/privacy/)[ Agreements and Guidelines ](https://developer.apple.com/support/terms/)
