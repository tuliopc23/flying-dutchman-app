Source: https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup

[ Skip Navigation ](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup#app-main)
  * [Global Nav Open Menu](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup#ac-gn-menustate)[Global Nav Close Menu](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup)
  * [Apple Developer](https://developer.apple.com/)


[ Search Developer Cancel  ](https://developer.apple.com/search/)
  * [Apple Developer](https://developer.apple.com/)
  * [News](https://developer.apple.com/news/)
  * [Discover](https://developer.apple.com/discover/)
  * [Design](https://developer.apple.com/design/)
  * [Develop](https://developer.apple.com/develop/)
  * [Distribute](https://developer.apple.com/distribute/)
  * [Support](https://developer.apple.com/support/)
  * [Account](https://developer.apple.com/account/)
  * [](https://developer.apple.com/search/)


Cancel 
Only search within “Documentation”
### Quick Links
  * [Downloads](https://developer.apple.com/download/)
  * [Documentation](https://developer.apple.com/documentation/)
  * [Sample Code](https://developer.apple.com/documentation/samplecode/)
  * [Videos](https://developer.apple.com/videos/)
  * [Forums](https://developer.apple.com/forums/)

5 Quick Links
[ Documentation ](https://developer.apple.com/documentation)
[ Open Menu ](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup)
  * SwiftLanguage:  Swift  Objective-C 
Language: 
    * Swift 
    * [ Objective-C ](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup)


[](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup)
## [ Foundation  ](https://developer.apple.com/documentation/foundation)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
33 of 64 symbols inside <root> containing 27 symbols[Foundation Data Types](https://developer.apple.com/documentation/foundation/foundation-data-types)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
15 of 64 symbols inside <root> containing 45 symbols[Scripting Support](https://developer.apple.com/documentation/foundation/scripting-support)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
16 of 64 symbols inside <root>
Files and Data Persistence
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
17 of 64 symbols inside <root> containing 17 symbols[File System](https://developer.apple.com/documentation/foundation/file-system)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
18 of 64 symbols inside <root> containing 32 symbols[Archives and Serialization](https://developer.apple.com/documentation/foundation/archives-and-serialization)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
19 of 64 symbols inside <root> containing 8 symbols[Settings](https://developer.apple.com/documentation/foundation/settings)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
20 of 64 symbols inside <root> containing 5 symbols[Spotlight](https://developer.apple.com/documentation/foundation/spotlight)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
21 of 64 symbols inside <root> containing 17 symbols[iCloud](https://developer.apple.com/documentation/foundation/icloud)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
22 of 64 symbols inside <root> [Optimizing Your App’s Data for iCloud Backup](https://developer.apple.com/documentation/foundation/optimizing-your-app-s-data-for-icloud-backup)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
23 of 64 symbols inside <root>
Networking
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
24 of 64 symbols inside <root> containing 41 symbols[URL Loading System](https://developer.apple.com/documentation/foundation/url-loading-system)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
25 of 64 symbols inside <root> containing 8 symbols[Bonjour](https://developer.apple.com/documentation/foundation/bonjour)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
26 of 64 symbols inside <root>
Low-Level Utilities
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
27 of 64 symbols inside <root> containing 9 symbols[XPC](https://developer.apple.com/documentation/foundation/xpc)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
28 of 64 symbols inside <root> containing 25 symbols[Object Runtime](https://developer.apple.com/documentation/foundation/object-runtime)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
29 of 64 symbols inside <root> containing 23 symbols[Processes and Threads](https://developer.apple.com/documentation/foundation/processes-and-threads)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
30 of 64 symbols inside <root> containing 14 symbols[Streams, Sockets, and Ports](https://developer.apple.com/documentation/foundation/streams-sockets-and-ports)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
31 of 64 symbols inside <root>
Reference
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
32 of 64 symbols inside <root> containing 9 symbols[Foundation Enumerations](https://developer.apple.com/documentation/foundation/foundation-enumerations)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
33 of 64 symbols inside <root> containing 27 symbols[Foundation Data Types](https://developer.apple.com/documentation/foundation/foundation-data-types)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
34 of 64 symbols inside <root>
Articles
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
35 of 64 symbols inside <root> [allocWithZone:](https://developer.apple.com/documentation/foundation/1807189-allocwithzone)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
36 of 64 symbols inside <root> [init](https://developer.apple.com/documentation/foundation/1808546-init)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
37 of 64 symbols inside <root> [initWithCoefficient:constant](https://developer.apple.com/documentation/foundation/1864803-initwithcoefficient)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
38 of 64 symbols inside <root> [intersectSet:](https://developer.apple.com/documentation/foundation/1807012-intersectset)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
39 of 64 symbols inside <root> [isEqual:](https://developer.apple.com/documentation/foundation/1806686-isequal)
64 items were found. Tab back to navigate through them. 
/ 
Navigator is ready 
  * [ Foundation ](https://developer.apple.com/documentation/foundation)
  * [ Optimizing Your App’s Data for iCloud Backup ](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup)
  *     * Optimizing Your App’s Data for iCloud Backup 


Article
# Optimizing Your App’s Data for iCloud Backup
Minimize the space and time that backups take to create by excluding purgeable and nonpurgeable data from backups.
## [Overview](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup#overview)
When iCloud Backup is in an enabled state, it periodically creates a backup of the user’s device, including your app’s data. By storing purgeable data in specific directories and signaling to the system that backups can exclude certain nonpurgeable data, you can shorten the time it takes to create a backup and help reduce the amount of space that backup consumes.
### [Exclude Purgeable Data](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup#Exclude-Purgeable-Data)
_Purgeable data_ is app data that the system can delete without affecting the app’s execution and that the app can re-create if it needs. For example, your app might generate thumbnails of larger images for display in a collection view. If the app saves the thumbnails to disk, consider them purgeable data because, if the system deletes those files, the app can create them again from source.
The app container provides two directories for storing purgeable data:
  * `/tmp`
  * `/Library/Caches`


The system periodically purges these directories, so iCloud Backup excludes them by default. If your app creates purgeable data, store it in one of these directories; otherwise, iCloud Backup may include that data, needlessly increasing the physical size of the backup with no benefit to the user. Don’t use these directories to exclude nonpurgeable data from iCloud Backup.
To retrieve the location of these system-provided directories, use the [`FileManager`](https://developer.apple.com/documentation/foundation/filemanager) class, as the following example shows.
```
let manager = FileManager.default


// Get the URL to the app container's 'tmp' directory.
let tmpDirectoryURL = manager.temporaryDirectory


// Get the URL to the app container's 'Caches' directory.
let cachesDirectoryURL = try manager.url(for: .cachesDirectory,
                                         in: .userDomainMask,
                                         appropriateFor: nil,
                                         create: false)

```

Consider deleting purgeable data as soon as your app is done with it so that it doesn’t continue to consume space on the user’s device.
### [Mark Nonpurgeable Data as Excludable](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup#Mark-Nonpurgeable-Data-as-Excludable)
_Nonpurgeable data_ is data the user creates, or data the app requires to function as the user expects. Some nonpurgeable data isn’t appropriate for backup.
For example, if your app downloads high-definition movies for offline viewing, exclude those files because they’re typically large in size and the user can download them again on a restored device, if necessary. Conversely, if your app allows the user to import arbitrary files such as PDFs, ebooks, and digital comics, don’t exclude those files because it might be difficult, even impossible, for the user to re-create them on a restored device.
If your app creates nonpurgeable data that isn’t appropriate for backup, you can indicate which files and directories the system can exclude by setting their [`isExcludedFromBackup`](https://developer.apple.com/documentation/foundation/urlresourcevalues/isexcludedfrombackup) resource value to [`true`](https://developer.apple.com/documentation/Swift/true), as the following example shows.
```
func excludeItem(at url: URL) throws {
    // Create the resource values for the specified URL.
    var values = URLResourceValues()
    values.isExcludedFromBackup = true


    // Apply those values to the URL.
    var url = url
    try url.setResourceValues(values)
}

```

Note
Because certain file operations can reset resource values, make sure you set an excluded file’s resource values each time you save it.
The [`isExcludedFromBackup`](https://developer.apple.com/documentation/foundation/urlresourcevalues/isexcludedfrombackup) resource value exists only to provide guidance to the system about which files and directories it can exclude; it’s not a mechanism to guarantee those items never appear in a backup or on a restored device.
To indicate the system can exclude a group of related files from iCloud Backup, move those files into a directory and update the directory’s [`isExcludedFromBackup`](https://developer.apple.com/documentation/foundation/urlresourcevalues/isexcludedfrombackup) resource value. If you create an excludable directory inside the app container’s `Library` directory, consider naming the directory with the app’s bundle identifier to avoid potential conflicts with directories the system may create there in the future.
```
let manager = FileManager.default


// Retrieve the app's bundle identifier.
if let bundleIdentifier = Bundle.main.bundleIdentifier {
    
    // Get the URL to the app container's 'Library' directory.
    var url = try manager.url(for: .libraryDirectory,
                              in: .userDomainMask,
                              appropriateFor: nil,
                              create: false)
    
    // Append the bundle identifier to the retrieved URL.
    url.appendPathComponent(bundleIdentifier, isDirectory: true)
    
    // Use the URL to create the new directory.
    try manager.createDirectory(at: url,
                                withIntermediateDirectories: true,
                                attributes: nil)
}

```

## [See Also](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup#see-also)
### [Files and Data Persistence](https://developer.apple.com/documentation/Foundation/optimizing-your-app-s-data-for-icloud-backup#Files-and-Data-Persistence)
[API Reference File System](https://developer.apple.com/documentation/foundation/file-system)
Create, read, write, and examine files and folders in the file system.
[API Reference Archives and Serialization](https://developer.apple.com/documentation/foundation/archives-and-serialization)
Convert objects and values to and from property list, JSON, and other flat binary representations.
[API Reference Settings](https://developer.apple.com/documentation/foundation/settings)
Configure your app using data you store persistently on the local disk or in iCloud.
[API Reference Spotlight](https://developer.apple.com/documentation/foundation/spotlight)
Search for files and other items on the local device, and index your app’s content for searching.
[API Reference iCloud](https://developer.apple.com/documentation/foundation/icloud)
Manage files and key-value data that automatically synchronize among a user’s iCloud devices.
Current page is Optimizing Your App’s Data for iCloud Backup 
[Apple](https://www.apple.com)
  1. [Developer](https://developer.apple.com/)
  2. [ Documentation ](https://developer.apple.com/documentation/)


###  Platforms 
Toggle Menu 
  * [iOS](https://developer.apple.com/ios/)
  * [iPadOS](https://developer.apple.com/ipados/)
  * [macOS](https://developer.apple.com/macos/)
  * [tvOS](https://developer.apple.com/tvos/)
  * [visionOS](https://developer.apple.com/visionos/)
  * [watchOS](https://developer.apple.com/watchos/)


###  Tools 
Toggle Menu 
  * [Swift](https://developer.apple.com/swift/)
  * [SwiftUI](https://developer.apple.com/swiftui/)
  * [Swift Playground](https://developer.apple.com/swift-playground/)
  * [TestFlight](https://developer.apple.com/testflight/)
  * [Xcode](https://developer.apple.com/xcode/)
  * [Xcode Cloud](https://developer.apple.com/xcode-cloud/)
  * [SF Symbols](https://developer.apple.com/sf-symbols/)


###  Topics & Technologies 
Toggle Menu 
  * [Accessibility](https://developer.apple.com/accessibility/)
  * [Accessories](https://developer.apple.com/accessories/)
  * [App Extension](https://developer.apple.com/app-extensions/)
  * [App Store](https://developer.apple.com/app-store/)
  * [Audio & Video](https://developer.apple.com/audio/)
  * [Augmented Reality](https://developer.apple.com/augmented-reality/)
  * [Design](https://developer.apple.com/design/)
  * [Distribution](https://developer.apple.com/distribute/)
  * [Education](https://developer.apple.com/education/)
  * [Fonts](https://developer.apple.com/fonts/)
  * [Games](https://developer.apple.com/games/)
  * [Health & Fitness](https://developer.apple.com/health-fitness/)
  * [In-App Purchase](https://developer.apple.com/in-app-purchase/)
  * [Localization](https://developer.apple.com/localization/)
  * [Maps & Location](https://developer.apple.com/maps/)
  * [Machine Learning & AI](https://developer.apple.com/machine-learning/)
  * [Open Source](https://opensource.apple.com/)
  * [Security](https://developer.apple.com/security/)
  * [Safari & Web](https://developer.apple.com/safari/)


###  Resources 
Toggle Menu 
  *   * [Documentation](https://developer.apple.com/documentation/)
  * [Tutorials](https://developer.apple.com/learn/)
  * [Downloads](https://developer.apple.com/download/)
  * [Forums](https://developer.apple.com/forums/)
  * [Videos](https://developer.apple.com/videos/)


###  Support 
Toggle Menu 
  * [Support Articles](https://developer.apple.com/support/articles/)
  * [Contact Us](https://developer.apple.com/contact/)
  * [Bug Reporting](https://developer.apple.com/bug-reporting/)
  * [System Status](https://developer.apple.com/system-status/)


###  Account 
Toggle Menu 
  * [Apple Developer](https://developer.apple.com/account/)
  * [App Store Connect](https://appstoreconnect.apple.com/)
  * [Certificates, IDs, & Profiles](https://developer.apple.com/account/ios/certificate/)
  * [Feedback Assistant](https://feedbackassistant.apple.com/)


###  Programs 
Toggle Menu 
  * [Apple Developer Program](https://developer.apple.com/programs/)
  * [Apple Developer Enterprise Program](https://developer.apple.com/programs/enterprise/)
  * [App Store Small Business Program](https://developer.apple.com/app-store/small-business-program/)
  * [MFi Program](https://mfi.apple.com/)
  * [News Partner Program](https://developer.apple.com/programs/news-partner/)
  * [Video Partner Program](https://developer.apple.com/programs/video-partner/)
  * [Security Bounty Program](https://developer.apple.com/security-bounty/)
  * [Security Research Device Program](https://developer.apple.com/programs/security-research-device/)


###  Events 
Toggle Menu 
  * [Meet with Apple](https://developer.apple.com/events/)
  * [Apple Developer Centers](https://developer.apple.com/events/developer-centers/)
  * [App Store Awards](https://developer.apple.com/app-store/app-store-awards/)
  * [Apple Design Awards](https://developer.apple.com/design/awards/)
  * [Apple Developer Academies](https://developer.apple.com/academies/)
  * [WWDC](https://developer.apple.com/wwdc/)


To submit feedback on documentation, visit [Feedback Assistant](applefeedback://new?form_identifier=developertools.fba&answers%5B%3Aarea%5D=seedADC%3Adevpubs&answers%5B%3Adoc_type_req%5D=Technology%20Documentation&answers%5B%3Adocumentation_link_req%5D=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FFoundation%2Foptimizing-your-app-s-data-for-icloud-backup).
Select a color scheme preference
Light
Dark
Auto
Copyright © 2025 [Apple Inc.](https://www.apple.com) All rights reserved. 
[ Terms of Use ](https://www.apple.com/legal/internet-services/terms/site.html)[ Privacy Policy ](https://www.apple.com/legal/privacy/)[ Agreements and Guidelines ](https://developer.apple.com/support/terms/)
