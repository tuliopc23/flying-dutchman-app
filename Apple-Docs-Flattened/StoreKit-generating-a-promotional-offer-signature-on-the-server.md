Source: https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server

[ Skip Navigation ](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server#app-main)
  * [Global Nav Open Menu](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server#ac-gn-menustate)[Global Nav Close Menu](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server)
  * [Apple Developer](https://developer.apple.com/)


[ Search Developer Cancel  ](https://developer.apple.com/search/)
  * [Apple Developer](https://developer.apple.com/)
  * [News](https://developer.apple.com/news/)
  * [Discover](https://developer.apple.com/discover/)
  * [Design](https://developer.apple.com/design/)
  * [Develop](https://developer.apple.com/develop/)
  * [Distribute](https://developer.apple.com/distribute/)
  * [Support](https://developer.apple.com/support/)
  * [Account](https://developer.apple.com/account/)
  * [](https://developer.apple.com/search/)


Cancel 
Only search within “Documentation”
### Quick Links
  * [Downloads](https://developer.apple.com/download/)
  * [Documentation](https://developer.apple.com/documentation/)
  * [Sample Code](https://developer.apple.com/documentation/samplecode/)
  * [Videos](https://developer.apple.com/videos/)
  * [Forums](https://developer.apple.com/forums/)

5 Quick Links
[ Documentation ](https://developer.apple.com/documentation)
[ Open Menu ](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server)
  * SwiftLanguage:  Swift  Objective-C 
Language: 
    * Swift 
    * [ Objective-C ](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server)


[](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server)
## [ StoreKit  ](https://developer.apple.com/documentation/storekit)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
1 of 33 symbols inside <root>
In-App Purchase
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
2 of 33 symbols inside <root> containing 60 symbols[In-App Purchase](https://developer.apple.com/documentation/storekit/in-app-purchase)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
1 of 60 symbols inside -1505352393 
In-App Purchase merchandising
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
2 of 60 symbols inside -1505352393 containing 83 symbols[StoreKit views](https://developer.apple.com/documentation/storekit/storekit-views)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
3 of 60 symbols inside -1505352393 
Product and subscription information
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
4 of 60 symbols inside -1505352393 [Implementing a store in your app using the StoreKit API](https://developer.apple.com/documentation/storekit/implementing-a-store-in-your-app-using-the-storekit-api)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
S
5 of 60 symbols inside -1505352393 containing 45 symbols[Product](https://developer.apple.com/documentation/storekit/product)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
S
6 of 60 symbols inside -1505352393 containing 24 symbols[Product.SubscriptionInfo](https://developer.apple.com/documentation/storekit/product/subscriptioninfo)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
T
7 of 60 symbols inside -1505352393 [SubscriptionInfo](https://developer.apple.com/documentation/storekit/subscriptioninfo)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
T
8 of 60 symbols inside -1505352393 [SubscriptionStatus](https://developer.apple.com/documentation/storekit/subscriptionstatus)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
9 of 60 symbols inside -1505352393 
Purchase requests and results
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
S
10 of 60 symbols inside -1505352393 containing 4 symbols[PurchaseAction](https://developer.apple.com/documentation/storekit/purchaseaction)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
M
11 of 60 symbols inside -1505352393 [func purchase(options: Set<Product.PurchaseOption>) async throws -> Product.PurchaseResult](https://developer.apple.com/documentation/storekit/product/purchase\(options:\))
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
E
12 of 60 symbols inside -1505352393 containing 4 symbols[Product.PurchaseResult](https://developer.apple.com/documentation/storekit/product/purchaseresult)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
13 of 60 symbols inside -1505352393 
Transaction history and entitlements
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
S
14 of 60 symbols inside -1505352393 containing 41 symbols[Transaction](https://developer.apple.com/documentation/storekit/transaction)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
15 of 60 symbols inside -1505352393 [static var updates: Transaction.Transactions](https://developer.apple.com/documentation/storekit/transaction/updates)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
16 of 60 symbols inside -1505352393 [static var all: Transaction.Transactions](https://developer.apple.com/documentation/storekit/transaction/all)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
6 of 19 symbols inside -1542378196 
Introductory offers
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
7 of 19 symbols inside -1542378196 [Implementing introductory offers in your app](https://developer.apple.com/documentation/storekit/implementing-introductory-offers-in-your-app)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
7 of 19 symbols inside -1542378196 [Implementing introductory offers in your app](https://developer.apple.com/documentation/storekit/implementing-introductory-offers-in-your-app)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
8 of 19 symbols inside -1542378196 [Testing introductory offers](https://developer.apple.com/documentation/storekit/testing-introductory-offers)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
9 of 19 symbols inside -1542378196 containing 12 symbols[SKProductDiscount](https://developer.apple.com/documentation/storekit/skproductdiscount)Deprecated
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
10 of 19 symbols inside -1542378196 
Promotional offers
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
11 of 19 symbols inside -1542378196 [Setting up promotional offers](https://developer.apple.com/documentation/storekit/setting-up-promotional-offers)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
12 of 19 symbols inside -1542378196 [Implementing promotional offers in your app](https://developer.apple.com/documentation/storekit/implementing-promotional-offers-in-your-app)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
13 of 19 symbols inside -1542378196 [Generating a signature for promotional offers](https://developer.apple.com/documentation/storekit/generating-a-signature-for-promotional-offers)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
14 of 19 symbols inside -1542378196 [Generating a Promotional Offer Signature on the Server](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
15 of 19 symbols inside -1542378196 containing 9 symbols[SKPaymentDiscount](https://developer.apple.com/documentation/storekit/skpaymentdiscount)Deprecated
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
16 of 19 symbols inside -1542378196 
Offer codes
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
17 of 19 symbols inside -1542378196 [Implementing offer codes in your app](https://developer.apple.com/documentation/storekit/implementing-offer-codes-in-your-app)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
18 of 19 symbols inside -1542378196 
Subscription service entitlement
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
19 of 19 symbols inside -1542378196 [Determining service entitlement on the server](https://developer.apple.com/documentation/storekit/determining-service-entitlement-on-the-server)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
47 of 60 symbols inside -864441183 
Promotions
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
48 of 60 symbols inside -864441183 [Promoting In-App Purchases](https://developer.apple.com/documentation/storekit/promoting-in-app-purchases)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
49 of 60 symbols inside -864441183 [Testing promoted In-App Purchases](https://developer.apple.com/documentation/storekit/testing-promoted-in-app-purchases)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
50 of 60 symbols inside -864441183 containing 9 symbols[SKProductStorePromotionController](https://developer.apple.com/documentation/storekit/skproductstorepromotioncontroller)Deprecated
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
51 of 60 symbols inside -864441183 
Testing In-App Purchases
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
52 of 60 symbols inside -864441183 [Testing at all stages of development with Xcode and the sandbox](https://developer.apple.com/documentation/storekit/testing-at-all-stages-of-development-with-xcode-and-the-sandbox)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
53 of 60 symbols inside -864441183 [Setting up StoreKit Testing in Xcode](https://developer.apple.com/documentation/xcode/setting-up-storekit-testing-in-xcode)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
54 of 60 symbols inside -864441183 [Testing In-App Purchases in Xcode](https://developer.apple.com/documentation/storekit/testing-in-app-purchases-in-xcode)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
55 of 60 symbols inside -864441183 containing 26 symbols[Testing In-App Purchases with sandbox](https://developer.apple.com/documentation/storekit/testing-in-app-purchases-with-sandbox)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
56 of 60 symbols inside -864441183 
Errors
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
57 of 60 symbols inside -864441183 [Handling errors](https://developer.apple.com/documentation/storekit/handling-errors)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
E
58 of 60 symbols inside -864441183 containing 24 symbols[SKError.Code](https://developer.apple.com/documentation/storekit/skerror/code)
172 items were found. Tab back to navigate through them. 
/ 
Navigator is ready 
  * [ StoreKit ](https://developer.apple.com/documentation/storekit)
  * [ In-App Purchase ](https://developer.apple.com/documentation/storekit/in-app-purchase)
  * [ Original API for In-App Purchase ](https://developer.apple.com/documentation/storekit/original-api-for-in-app-purchase)
  * [ Subscriptions and offers ](https://developer.apple.com/documentation/storekit/subscriptions-and-offers)
  * [ Generating a Promotional Offer Signature on the Server ](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server)
  *     * [ In-App Purchase ](https://developer.apple.com/documentation/storekit/in-app-purchase)
    * [ Original API for In-App Purchase ](https://developer.apple.com/documentation/storekit/original-api-for-in-app-purchase)
    * [ Subscriptions and offers ](https://developer.apple.com/documentation/storekit/subscriptions-and-offers)
    * Generating a Promotional Offer Signature on the Server 


Sample Code
# Generating a Promotional Offer Signature on the Server
Generate a signature using your private key and lightweight cryptography libraries.
[ Download ](https://docs-assets.developer.apple.com/published/6c875bdd27a7/GeneratingAPromotionalOfferSignatureOnTheServer.zip)
## [Overview](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server#Overview)
Note
This sample code project is associated with WWDC 2019 session [305: Subscription Offers Best Practices](https://developer.apple.com/videos/play/wwdc19/305/).
This sample code is a simple server written using JavaScript and Node.js. It demonstrates how to generate a signature for promotional offers. The sample demonstrates:
  * Receiving a request.
  * Generating a cryptographic signature using your private key.
  * Sending back a response with the signature.


All of the work is done in `routes/index.js`. You set up environment variables for your key ID and your private key in the `start-server` file.
### [Configure the Sample Code Project](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server#Configure-the-Sample-Code-Project)
  1. Install the latest stable version of Node.js.
  2. Open Terminal.app and navigate to the sample code directory.
  3. Run `npm install` from the command line, and make sure it completes successfully.
  4. The `start-server` file contains a key ID and private key PEM string. The values provided in the sample are for example purposes only and will not generate signatures that are valid for your apps. You can optionally open `start-server` with a text editor and replace the example key ID and private key PEM string with your own key ID and private key PEM string that you received from App Store Connect.


### [Run a Test on Your Local Server](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server#Run-a-Test-on-Your-Local-Server)
To test the code on your local machine, from the command line:
  * Navigate to the sample code source folder and run `./start-server` from the command line. The server is now running locally and is ready to accept connections on port 3000.
  * Open another terminal window and use the `curl` command to send a request. This example command uses the same data listed in the JSON example below:


```
curl -X GET -H "Content-type: application/json" -d '{"appBundleID": "com.example.yourapp", "productIdentifier": "com.example.yoursubscription", "offerID": "your_offer_id", "applicationUsername": "8E3DC5F16E13537ADB45FB0F980ACDB6B55839870DBCE7E346E1826F5B0296CA"}' http://127.0.0.1:3000/offer

```

You will get a response that includes the signature.
### [Send a Request](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server#Send-a-Request)
To run this sample code, send a request to this URL: `GET http://<yourdomain>/offer`, where `<yourdomain>` is the domain name or IP address of the server this sample code is running on.
The request must have a `Content-type` header of `application/json`, and JSON body data with the following format:
```
{
    "appBundleID": "com.example.yourapp",
    "productIdentifier": "com.example.yoursubscription",
    "offerID": "your_offer_id",
    "applicationUsername": "8E3DC5F16E13537ADB45FB0F980ACDB6B55839870DBCE7E346E1826F5B0296CA"
}

```

## [See Also](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server#see-also)
### [Promotional offers](https://developer.apple.com/documentation/storekit/generating-a-promotional-offer-signature-on-the-server#Promotional-offers)
[Setting up promotional offers](https://developer.apple.com/documentation/storekit/setting-up-promotional-offers)
Generate a key and configure offers for auto-renewable subscriptions in App Store Connect.
[Implementing promotional offers in your app](https://developer.apple.com/documentation/storekit/implementing-promotional-offers-in-your-app)
Offer discounted pricing for auto-renewable subscription products to eligible subscribers.
[Generating a signature for promotional offers](https://developer.apple.com/documentation/storekit/generating-a-signature-for-promotional-offers)
Create a signature to validate a promotional offer using your private key.
[`class SKPaymentDiscount`](https://developer.apple.com/documentation/storekit/skpaymentdiscount)
The signed discount to apply to a payment.
Deprecated
Current page is Generating a Promotional Offer Signature on the Server 
[Apple](https://www.apple.com)
  1. [Developer](https://developer.apple.com/)
  2. [ Documentation ](https://developer.apple.com/documentation/)


###  Platforms 
Toggle Menu 
  * [iOS](https://developer.apple.com/ios/)
  * [iPadOS](https://developer.apple.com/ipados/)
  * [macOS](https://developer.apple.com/macos/)
  * [tvOS](https://developer.apple.com/tvos/)
  * [visionOS](https://developer.apple.com/visionos/)
  * [watchOS](https://developer.apple.com/watchos/)


###  Tools 
Toggle Menu 
  * [Swift](https://developer.apple.com/swift/)
  * [SwiftUI](https://developer.apple.com/swiftui/)
  * [Swift Playground](https://developer.apple.com/swift-playground/)
  * [TestFlight](https://developer.apple.com/testflight/)
  * [Xcode](https://developer.apple.com/xcode/)
  * [Xcode Cloud](https://developer.apple.com/xcode-cloud/)
  * [SF Symbols](https://developer.apple.com/sf-symbols/)


###  Topics & Technologies 
Toggle Menu 
  * [Accessibility](https://developer.apple.com/accessibility/)
  * [Accessories](https://developer.apple.com/accessories/)
  * [App Extension](https://developer.apple.com/app-extensions/)
  * [App Store](https://developer.apple.com/app-store/)
  * [Audio & Video](https://developer.apple.com/audio/)
  * [Augmented Reality](https://developer.apple.com/augmented-reality/)
  * [Design](https://developer.apple.com/design/)
  * [Distribution](https://developer.apple.com/distribute/)
  * [Education](https://developer.apple.com/education/)
  * [Fonts](https://developer.apple.com/fonts/)
  * [Games](https://developer.apple.com/games/)
  * [Health & Fitness](https://developer.apple.com/health-fitness/)
  * [In-App Purchase](https://developer.apple.com/in-app-purchase/)
  * [Localization](https://developer.apple.com/localization/)
  * [Maps & Location](https://developer.apple.com/maps/)
  * [Machine Learning & AI](https://developer.apple.com/machine-learning/)
  * [Open Source](https://opensource.apple.com/)
  * [Security](https://developer.apple.com/security/)
  * [Safari & Web](https://developer.apple.com/safari/)


###  Resources 
Toggle Menu 
  *   * [Documentation](https://developer.apple.com/documentation/)
  * [Tutorials](https://developer.apple.com/learn/)
  * [Downloads](https://developer.apple.com/download/)
  * [Forums](https://developer.apple.com/forums/)
  * [Videos](https://developer.apple.com/videos/)


###  Support 
Toggle Menu 
  * [Support Articles](https://developer.apple.com/support/articles/)
  * [Contact Us](https://developer.apple.com/contact/)
  * [Bug Reporting](https://developer.apple.com/bug-reporting/)
  * [System Status](https://developer.apple.com/system-status/)


###  Account 
Toggle Menu 
  * [Apple Developer](https://developer.apple.com/account/)
  * [App Store Connect](https://appstoreconnect.apple.com/)
  * [Certificates, IDs, & Profiles](https://developer.apple.com/account/ios/certificate/)
  * [Feedback Assistant](https://feedbackassistant.apple.com/)


###  Programs 
Toggle Menu 
  * [Apple Developer Program](https://developer.apple.com/programs/)
  * [Apple Developer Enterprise Program](https://developer.apple.com/programs/enterprise/)
  * [App Store Small Business Program](https://developer.apple.com/app-store/small-business-program/)
  * [MFi Program](https://mfi.apple.com/)
  * [News Partner Program](https://developer.apple.com/programs/news-partner/)
  * [Video Partner Program](https://developer.apple.com/programs/video-partner/)
  * [Security Bounty Program](https://developer.apple.com/security-bounty/)
  * [Security Research Device Program](https://developer.apple.com/programs/security-research-device/)


###  Events 
Toggle Menu 
  * [Meet with Apple](https://developer.apple.com/events/)
  * [Apple Developer Centers](https://developer.apple.com/events/developer-centers/)
  * [App Store Awards](https://developer.apple.com/app-store/app-store-awards/)
  * [Apple Design Awards](https://developer.apple.com/design/awards/)
  * [Apple Developer Academies](https://developer.apple.com/academies/)
  * [WWDC](https://developer.apple.com/wwdc/)


To submit feedback on documentation, visit [Feedback Assistant](applefeedback://new?form_identifier=developertools.fba&answers%5B%3Aarea%5D=seedADC%3Adevpubs&answers%5B%3Adoc_type_req%5D=Technology%20Documentation&answers%5B%3Adocumentation_link_req%5D=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fstorekit%2Fgenerating-a-promotional-offer-signature-on-the-server).
Select a color scheme preference
Light
Dark
Auto
Copyright © 2025 [Apple Inc.](https://www.apple.com) All rights reserved. 
[ Terms of Use ](https://www.apple.com/legal/internet-services/terms/site.html)[ Privacy Policy ](https://www.apple.com/legal/privacy/)[ Agreements and Guidelines ](https://developer.apple.com/support/terms/)
