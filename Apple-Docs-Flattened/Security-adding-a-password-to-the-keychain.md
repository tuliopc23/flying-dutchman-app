Source: https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain

[ Skip Navigation ](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain#app-main)
  * [Global Nav Open Menu](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain#ac-gn-menustate)[Global Nav Close Menu](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain)
  * [Apple Developer](https://developer.apple.com/)


[ Search Developer Cancel  ](https://developer.apple.com/search/)
  * [Apple Developer](https://developer.apple.com/)
  * [News](https://developer.apple.com/news/)
  * [Discover](https://developer.apple.com/discover/)
  * [Design](https://developer.apple.com/design/)
  * [Develop](https://developer.apple.com/develop/)
  * [Distribute](https://developer.apple.com/distribute/)
  * [Support](https://developer.apple.com/support/)
  * [Account](https://developer.apple.com/account/)
  * [](https://developer.apple.com/search/)


Cancel 
Only search within “Documentation”
### Quick Links
  * [Downloads](https://developer.apple.com/download/)
  * [Documentation](https://developer.apple.com/documentation/)
  * [Sample Code](https://developer.apple.com/documentation/samplecode/)
  * [Videos](https://developer.apple.com/videos/)
  * [Forums](https://developer.apple.com/forums/)

5 Quick Links
[ Documentation ](https://developer.apple.com/documentation)
[ Open Menu ](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain)
  * SwiftLanguage:  Swift  Objective-C 
Language: 
    * Swift 
    * [ Objective-C ](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain)


[](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain)
## [ Security  ](https://developer.apple.com/documentation/security)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
18 of 71 symbols inside 1250681498 [func SecItemUpdate(CFDictionary, CFDictionary) -> OSStatus](https://developer.apple.com/documentation/security/secitemupdate\(_:_:\))
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
2 of 4 symbols inside -2083919462 containing 71 symbols[Keychain items](https://developer.apple.com/documentation/security/keychain-items)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
1 of 71 symbols inside 1250681498 
Essentials
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
2 of 71 symbols inside 1250681498 containing 7 symbols[Using the keychain to manage user secrets](https://developer.apple.com/documentation/security/using-the-keychain-to-manage-user-secrets)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
3 of 71 symbols inside 1250681498 [TN3137: On Mac keychain APIs and implementations](https://developer.apple.com/documentation/technotes/tn3137-on-mac-keychains)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
4 of 71 symbols inside 1250681498 [SecKeychainItem](https://developer.apple.com/documentation/security/seckeychainitem)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
5 of 71 symbols inside 1250681498 [func SecKeychainItemGetTypeID() -> CFTypeID](https://developer.apple.com/documentation/security/seckeychainitemgettypeid\(\))Deprecated
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
6 of 71 symbols inside 1250681498 
Adding keychain items
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
7 of 71 symbols inside 1250681498 [Adding a password to the keychain](https://developer.apple.com/documentation/security/adding-a-password-to-the-keychain)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
8 of 71 symbols inside 1250681498 [func SecItemAdd(CFDictionary, UnsafeMutablePointer<CFTypeRef?>?) -> OSStatus](https://developer.apple.com/documentation/security/secitemadd\(_:_:\))
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
9 of 71 symbols inside 1250681498 containing 8 symbols[Item class keys and values](https://developer.apple.com/documentation/security/item-class-keys-and-values)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
10 of 71 symbols inside 1250681498 containing 136 symbols[Item attribute keys and values](https://developer.apple.com/documentation/security/item-attribute-keys-and-values)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
11 of 71 symbols inside 1250681498 
Keychain item search
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
12 of 71 symbols inside 1250681498 [Searching for keychain items](https://developer.apple.com/documentation/security/searching-for-keychain-items)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
13 of 71 symbols inside 1250681498 [func SecItemCopyMatching(CFDictionary, UnsafeMutablePointer<CFTypeRef?>?) -> OSStatus](https://developer.apple.com/documentation/security/secitemcopymatching\(_:_:\))
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
14 of 71 symbols inside 1250681498 containing 31 symbols[Search attribute keys and values](https://developer.apple.com/documentation/security/search-attribute-keys-and-values)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
15 of 71 symbols inside 1250681498 containing 9 symbols[Item return result keys](https://developer.apple.com/documentation/security/item-return-result-keys)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
16 of 71 symbols inside 1250681498 
Keychain item modification
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
17 of 71 symbols inside 1250681498 [Updating and deleting keychain items](https://developer.apple.com/documentation/security/updating-and-deleting-keychain-items)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
18 of 71 symbols inside 1250681498 [func SecItemUpdate(CFDictionary, CFDictionary) -> OSStatus](https://developer.apple.com/documentation/security/secitemupdate\(_:_:\))
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
19 of 71 symbols inside 1250681498 [func SecItemDelete(CFDictionary) -> OSStatus](https://developer.apple.com/documentation/security/secitemdelete\(_:\))
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
20 of 71 symbols inside 1250681498 
Keychain item access
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
21 of 71 symbols inside 1250681498 [Sharing access to keychain items among a collection of apps](https://developer.apple.com/documentation/security/sharing-access-to-keychain-items-among-a-collection-of-apps)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
T
22 of 71 symbols inside 1250681498 [Keychain Access Groups Entitlement](https://developer.apple.com/documentation/bundleresources/entitlements/keychain-access-groups)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
23 of 71 symbols inside 1250681498 [Restricting keychain item accessibility](https://developer.apple.com/documentation/security/restricting-keychain-item-accessibility)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
24 of 71 symbols inside 1250681498 [func SecAccessControlCreateWithFlags(CFAllocator?, CFTypeRef, SecAccessControlCreateFlags, UnsafeMutablePointer<Unmanaged<CFError>?>?) -> SecAccessControl?](https://developer.apple.com/documentation/security/secaccesscontrolcreatewithflags\(_:_:_:_:\))
140 items were found. Tab back to navigate through them. 
/ 
Navigator is ready 
  * [ Security ](https://developer.apple.com/documentation/security)
  * [ Keychain services ](https://developer.apple.com/documentation/security/keychain-services)
  * [ Keychain items ](https://developer.apple.com/documentation/security/keychain-items)
  * [ Adding a password to the keychain ](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain)
  *     * [ Keychain services ](https://developer.apple.com/documentation/security/keychain-services)
    * [ Keychain items ](https://developer.apple.com/documentation/security/keychain-items)
    * Adding a password to the keychain 


Article
# Adding a password to the keychain
Add network credentials to the keychain on behalf of the user.
## [Overview](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain#overview)
Use keychain services to enable simple, secure storage for users’ passwords. In this way you avoid repeatedly asking the user for a password, and you don’t have to implement your own encryption, which can be error prone.
### [Get Set Up](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain#Get-Set-Up)
To get started, define a structure to hold the credentials as they move around your app in memory:
```
struct Credentials {
    var username: String
    var password: String
}

```

Next, define an error enumeration that you can use to communicate keychain access outcomes:
```
enum KeychainError: Error {
    case noPassword
    case unexpectedPasswordData
    case unhandledError(status: OSStatus)
}

```

Then, identify the server that your app is working with:
```
static let server = "www.example.com"

```

### [Create an add query](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain#Create-an-add-query)
Using an instance of the credentials structure and the server constant, you can create an add query:
```
let account = credentials.username
let password = credentials.password.data(using: String.Encoding.utf8)!
var query: [String: Any] = [kSecClass as String: kSecClassInternetPassword,
                            kSecAttrAccount as String: account,
                            kSecAttrServer as String: server,
                            kSecValueData as String: password]

```

The query dictionary’s first key-value pair indicates that the item is an Internet password, from which keychain services infers that the data is secret and requires encryption. This also ensures that the item has attributes that distinguish it from other Internet passwords, such as the server and account to which it applies. Indeed, the next two key-value pairs in the query provide this information, attaching the user name acquired from the user as the account, along with a domain name appropriate to this password as the server.
Note
Keychain services also offers the related [`kSecClassGenericPassword`](https://developer.apple.com/documentation/security/ksecclassgenericpassword) item class. Generic passwords are similar in most respects to Internet passwords, but they lack certain attributes specific to remote access (for example, they don’t have a [`kSecAttrServer`](https://developer.apple.com/documentation/security/ksecattrserver) attribute). When you don’t need these extra attributes, use a generic password instead.
Although not necessary in this case, you might further characterize the password by specifying additional attributes, such as the port number or the network protocol. For example, if you need to store distinct FTP and HTTP credentials for the same user working on the same server, you might add the [`kSecAttrProtocol`](https://developer.apple.com/documentation/security/ksecattrprotocol) attribute to distinguish between them.
Finally, the query contains the password from the user, encoded as a [`Data`](https://developer.apple.com/documentation/Foundation/Data) instance.
### [Add the item](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain#Add-the-item)
With the query complete, you simply feed it to the [`SecItemAdd(_:_:)`](https://developer.apple.com/documentation/security/secitemadd\(_:_:\)) function:
```
let status = SecItemAdd(query as CFDictionary, nil)
guard status == errSecSuccess else { throw KeychainError.unhandledError(status: status) }

```

Although you typically ignore the return data supplied by reference in the second argument on an add operation (as demonstrated here), always check the function’s return status to ensure that the operation succeeds. The operation might fail, for example, if an item with the given attributes already exists.
Note
If you do want the return data, keep in mind that the [`SecItemAdd(_:_:)`](https://developer.apple.com/documentation/security/secitemadd\(_:_:\)) function behaves much like the [`SecItemCopyMatching(_:_:)`](https://developer.apple.com/documentation/security/secitemcopymatching\(_:_:\)) function in this regard. See [Searching for keychain items](https://developer.apple.com/documentation/security/searching-for-keychain-items) for details.
### [Ensure searchability](https://developer.apple.com/documentation/Security/adding-a-password-to-the-keychain#Ensure-searchability)
To find the item later, use your knowledge of its attributes. In this example, the server and the account are the item’s distinguishing characteristics. For constant attributes (here, the server), use the same value during lookup. In contrast, the account attribute is dynamic, because it holds a value provided by the user at runtime. As long as your app never adds similar items with varying attributes (such as passwords for different accounts on the same server), you can omit these dynamic attributes as search parameters and instead retrieve them along with the item. As a result, when you look up the password, you also get the corresponding username. For more information on finding keychain items, see [Searching for keychain items](https://developer.apple.com/documentation/security/searching-for-keychain-items).
If your app does add items with varying dynamic attributes, you need a way to choose among them during retrieval. One option is to record information about the items in another way. For example, if you keep records of users in a Core Data model, you store the username there after using keychain services to store the password field. Later, you use the user name pulled from your data model to condition the search for the password.
In other cases, it might make sense to further characterize the item by adding more attributes. For example, you might include the [`kSecAttrLabel`](https://developer.apple.com/documentation/security/ksecattrlabel) attribute in the original add query, providing a string that marks the item for the particular purpose. Then you can use this attribute to narrow your search later.
Current page is Adding a password to the keychain 
[Apple](https://www.apple.com)
  1. [Developer](https://developer.apple.com/)
  2. [ Documentation ](https://developer.apple.com/documentation/)


###  Platforms 
Toggle Menu 
  * [iOS](https://developer.apple.com/ios/)
  * [iPadOS](https://developer.apple.com/ipados/)
  * [macOS](https://developer.apple.com/macos/)
  * [tvOS](https://developer.apple.com/tvos/)
  * [visionOS](https://developer.apple.com/visionos/)
  * [watchOS](https://developer.apple.com/watchos/)


###  Tools 
Toggle Menu 
  * [Swift](https://developer.apple.com/swift/)
  * [SwiftUI](https://developer.apple.com/swiftui/)
  * [Swift Playground](https://developer.apple.com/swift-playground/)
  * [TestFlight](https://developer.apple.com/testflight/)
  * [Xcode](https://developer.apple.com/xcode/)
  * [Xcode Cloud](https://developer.apple.com/xcode-cloud/)
  * [SF Symbols](https://developer.apple.com/sf-symbols/)


###  Topics & Technologies 
Toggle Menu 
  * [Accessibility](https://developer.apple.com/accessibility/)
  * [Accessories](https://developer.apple.com/accessories/)
  * [App Extension](https://developer.apple.com/app-extensions/)
  * [App Store](https://developer.apple.com/app-store/)
  * [Audio & Video](https://developer.apple.com/audio/)
  * [Augmented Reality](https://developer.apple.com/augmented-reality/)
  * [Design](https://developer.apple.com/design/)
  * [Distribution](https://developer.apple.com/distribute/)
  * [Education](https://developer.apple.com/education/)
  * [Fonts](https://developer.apple.com/fonts/)
  * [Games](https://developer.apple.com/games/)
  * [Health & Fitness](https://developer.apple.com/health-fitness/)
  * [In-App Purchase](https://developer.apple.com/in-app-purchase/)
  * [Localization](https://developer.apple.com/localization/)
  * [Maps & Location](https://developer.apple.com/maps/)
  * [Machine Learning & AI](https://developer.apple.com/machine-learning/)
  * [Open Source](https://opensource.apple.com/)
  * [Security](https://developer.apple.com/security/)
  * [Safari & Web](https://developer.apple.com/safari/)


###  Resources 
Toggle Menu 
  *   * [Documentation](https://developer.apple.com/documentation/)
  * [Tutorials](https://developer.apple.com/learn/)
  * [Downloads](https://developer.apple.com/download/)
  * [Forums](https://developer.apple.com/forums/)
  * [Videos](https://developer.apple.com/videos/)


###  Support 
Toggle Menu 
  * [Support Articles](https://developer.apple.com/support/articles/)
  * [Contact Us](https://developer.apple.com/contact/)
  * [Bug Reporting](https://developer.apple.com/bug-reporting/)
  * [System Status](https://developer.apple.com/system-status/)


###  Account 
Toggle Menu 
  * [Apple Developer](https://developer.apple.com/account/)
  * [App Store Connect](https://appstoreconnect.apple.com/)
  * [Certificates, IDs, & Profiles](https://developer.apple.com/account/ios/certificate/)
  * [Feedback Assistant](https://feedbackassistant.apple.com/)


###  Programs 
Toggle Menu 
  * [Apple Developer Program](https://developer.apple.com/programs/)
  * [Apple Developer Enterprise Program](https://developer.apple.com/programs/enterprise/)
  * [App Store Small Business Program](https://developer.apple.com/app-store/small-business-program/)
  * [MFi Program](https://mfi.apple.com/)
  * [News Partner Program](https://developer.apple.com/programs/news-partner/)
  * [Video Partner Program](https://developer.apple.com/programs/video-partner/)
  * [Security Bounty Program](https://developer.apple.com/security-bounty/)
  * [Security Research Device Program](https://developer.apple.com/programs/security-research-device/)


###  Events 
Toggle Menu 
  * [Meet with Apple](https://developer.apple.com/events/)
  * [Apple Developer Centers](https://developer.apple.com/events/developer-centers/)
  * [App Store Awards](https://developer.apple.com/app-store/app-store-awards/)
  * [Apple Design Awards](https://developer.apple.com/design/awards/)
  * [Apple Developer Academies](https://developer.apple.com/academies/)
  * [WWDC](https://developer.apple.com/wwdc/)


To submit feedback on documentation, visit [Feedback Assistant](applefeedback://new?form_identifier=developertools.fba&answers%5B%3Aarea%5D=seedADC%3Adevpubs&answers%5B%3Adoc_type_req%5D=Technology%20Documentation&answers%5B%3Adocumentation_link_req%5D=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FSecurity%2Fadding-a-password-to-the-keychain).
Select a color scheme preference
Light
Dark
Auto
Copyright © 2025 [Apple Inc.](https://www.apple.com) All rights reserved. 
[ Terms of Use ](https://www.apple.com/legal/internet-services/terms/site.html)[ Privacy Policy ](https://www.apple.com/legal/privacy/)[ Agreements and Guidelines ](https://developer.apple.com/support/terms/)
