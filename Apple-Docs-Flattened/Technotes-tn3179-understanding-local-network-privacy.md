Source: https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy

[ Skip Navigation ](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#app-main)
  * [Global Nav Open Menu](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#ac-gn-menustate)[Global Nav Close Menu](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy)
  * [Apple Developer](https://developer.apple.com/)


[ Search Developer Cancel  ](https://developer.apple.com/search/)
  * [Apple Developer](https://developer.apple.com/)
  * [News](https://developer.apple.com/news/)
  * [Discover](https://developer.apple.com/discover/)
  * [Design](https://developer.apple.com/design/)
  * [Develop](https://developer.apple.com/develop/)
  * [Distribute](https://developer.apple.com/distribute/)
  * [Support](https://developer.apple.com/support/)
  * [Account](https://developer.apple.com/account/)
  * [](https://developer.apple.com/search/)


Cancel 
Only search within “Documentation”
### Quick Links
  * [Downloads](https://developer.apple.com/download/)
  * [Documentation](https://developer.apple.com/documentation/)
  * [Sample Code](https://developer.apple.com/documentation/samplecode/)
  * [Videos](https://developer.apple.com/videos/)
  * [Forums](https://developer.apple.com/forums/)

5 Quick Links
[ Documentation ](https://developer.apple.com/documentation)
[ Open Menu ](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy)
## [ Technotes  ](https://developer.apple.com/documentation/technotes)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
4 of 74 symbols inside <root> [TN3193: Managing the on-device foundation model’s context window](https://developer.apple.com/documentation/technotes/tn3193-managing-the-on-device-foundation-model-s-context-window)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
5 of 74 symbols inside <root> [TN3115: Bluetooth State Restoration app relaunch rules](https://developer.apple.com/documentation/technotes/tn3115-bluetooth-state-restoration-app-relaunch-rules)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
6 of 74 symbols inside <root> [TN3192: Migrating your iPad app from the deprecated UIRequiresFullScreen key](https://developer.apple.com/documentation/technotes/tn3192-migrating-your-app-from-the-deprecated-uirequiresfullscreen-key)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
7 of 74 symbols inside <root> [TN3151: Choosing the right networking API](https://developer.apple.com/documentation/technotes/tn3151-choosing-the-right-networking-api)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
8 of 74 symbols inside <root> [TN3111: iOS Wi-Fi API overview](https://developer.apple.com/documentation/technotes/tn3111-ios-wifi-api-overview)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
9 of 74 symbols inside <root> [TN3191: IMAP extensions supported by Mail for iOS, iPadOS, and visionOS](https://developer.apple.com/documentation/technotes/tn3191-imap-extensions-supported-by-mail)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
10 of 74 symbols inside <root> [TN3134: Network Extension provider deployment](https://developer.apple.com/documentation/technotes/tn3134-network-extension-provider-deployment)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
11 of 74 symbols inside <root> [TN3179: Understanding local network privacy](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
12 of 74 symbols inside <root> [TN3189: Managing Mail background traffic load](https://developer.apple.com/documentation/technotes/tn3189-managing-mail-background-traffic-load)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
13 of 74 symbols inside <root> [TN3187: Migrating to the UIKit scene-based life cycle](https://developer.apple.com/documentation/technotes/tn3187-migrating-to-the-uikit-scene-based-life-cycle)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
14 of 74 symbols inside <root> [TN3188: Troubleshooting In-App Purchases availability in the App Store](https://developer.apple.com/documentation/technotes/tn3188-troubleshooting-in-app-purchases-availability-in-the-app-store)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
15 of 74 symbols inside <root> [TN3186: Troubleshooting In-App Purchases availability in the sandbox](https://developer.apple.com/documentation/technotes/tn3186-troubleshooting-in-app-purchases-availability-in-the-sandbox)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
16 of 74 symbols inside <root> [TN3185: Troubleshooting In-App Purchases availability in Xcode](https://developer.apple.com/documentation/technotes/tn3185-troubleshooting-in-app-purchases-availability-in-xcode)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
17 of 74 symbols inside <root> [TN3182: Adding privacy tracking keys to your privacy manifest](https://developer.apple.com/documentation/technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
18 of 74 symbols inside <root> [TN3183: Adding required reason API entries to your privacy manifest](https://developer.apple.com/documentation/technotes/tn3183-adding-required-reason-api-entries-to-your-privacy-manifest)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
19 of 74 symbols inside <root> [TN3184: Adding data collection details to your privacy manifest](https://developer.apple.com/documentation/technotes/tn3184-adding-data-collection-details-to-your-privacy-manifest)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
20 of 74 symbols inside <root> [TN3181: Debugging an invalid privacy manifest](https://developer.apple.com/documentation/technotes/tn3181-debugging-invalid-privacy-manifest)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
21 of 74 symbols inside <root> [TN3180: Reverting to App Store Server Notifications V1](https://developer.apple.com/documentation/technotes/tn3180-reverting-app-store-server-notifications-v1)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
22 of 74 symbols inside <root> [TN3178: Checking for and resolving build UUID problems](https://developer.apple.com/documentation/technotes/tn3178-checking-for-and-resolving-build-uuid-problems)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
23 of 74 symbols inside <root> [TN3177: Understanding alternate audio track groups in movie files](https://developer.apple.com/documentation/technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
24 of 74 symbols inside <root> [TN3176: Troubleshooting Apple Pay payment processing issues](https://developer.apple.com/documentation/technotes/tn3176-troubleshooting-apple-pay-payment-processing-issues)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
25 of 74 symbols inside <root> [TN3175: Diagnosing issues with displaying the Apple Pay button on your website](https://developer.apple.com/documentation/technotes/tn3175-diagnosing-issues-with-displaying-the-apple-pay-button-on-your-website)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
26 of 74 symbols inside <root> [TN3174: Diagnosing issues with the Apple Pay payment sheet on your website](https://developer.apple.com/documentation/technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
27 of 74 symbols inside <root> [TN3173: Troubleshooting issues with your Apple Pay merchant identifier configuration](https://developer.apple.com/documentation/technotes/tn3173-troubleshooting-issues-with-your-apple-pay-merchant-id-configuration)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
28 of 74 symbols inside <root> [TN3168: Making your App Clip available in the App Store](https://developer.apple.com/documentation/technotes/tn3168-making-your-app-clip-available-app-store)
74 items were found. Tab back to navigate through them. 
/ 
Navigator is ready 
  * [ Technotes ](https://developer.apple.com/documentation/technotes)
  * [ TN3179: Understanding local network privacy ](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy)
  *     * TN3179: Understanding local network privacy 


Article
# TN3179: Understanding local network privacy
Learn how local network privacy affects your software.
## [Overview](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Overview)
Local network privacy puts people in control of which programs can interact with devices on their network. The first time a program accesses the local network, the system displays an alert asking the user to approve that access. The system records their decision, so future accesses don’t prompt.
To learn more, see:
  * WWDC 2020 Session 10110: [Support local network privacy in your app](https://developer.apple.com/videos/play/wwdc2020/10110/), which introduced the feature on iOS
  * WWDC 2024 Session 10123: [What’s new in privacy](https://developer.apple.com/videos/play/wwdc2024/10123/), which introduced the feature on macOS
  * [If an app would like to connect to devices on your local network](https://support.apple.com/en-us/102229), which explains local network privacy to people who use iOS


Users configure local network privacy in Settings > Privacy & Security > Local Network (System Settings on macOS). The OS adds an app to this list after it attempts to access a local network.
Device managers aren’t able to configure local network privacy using MDM.
The following platforms support local network privacy:
Platform | Supported | Introduced  
---|---|---  
iOS | yes | iOS 14  
iPadOS | yes | iPadOS 14  
macOS | yes | macOS 15  
tvOS | no | -  
visionOS | yes | visionOS 1  
watchOS | no | -  
Local network privacy works the same on iOS, iPadOS, and visionOS. Unless otherwise noted, assume that any info about iOS applies to all three platforms. See [iOS considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#iOS-considerations) for information specific to these three platforms.
Local network privacy on macOS shares all of the same core concepts, but there are platform-specific differences. See [macOS considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#macOS-considerations) for more on this.
## [Essentials](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Essentials)
Local network privacy regulates your program’s ability to perform local network operations. If your program has local network access, the system allows the operation. If not, the system blocks it.
Note
See [Local network operations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Local-network-operations) for more precise definitions of _local network_ and _local network operation_.
In most cases, the user controls local network access by way of the Local Network privilege. This has three states:
  * Undetermined
  * Allowed
  * Denied


Your program starts in the undetermined state. The first time it performs a local network operation, the system presents the local network alert. The user chooses to either allow or deny the access. The system records the user’s choice and applies it to subsequent operations. The user can change this state at any time in Settings.
Note
Some programs have local network access based on factors other than the Local Network privilege. For the details, see [App extension considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#App-extension-considerations) and [macOS considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#macOS-considerations).
If your app accesses the local network, add the [`NSLocalNetworkUsageDescription`](https://developer.apple.com/documentation/BundleResources/Information-Property-List/NSLocalNetworkUsageDescription) property to its `Info.plist` to explain its behavior to the user.
If your app allows people to enter an arbitrary network address, consider what happens if they enter a local network address. For example, if you’re building an email client, check that it behaves correctly when the email server is on a local network.
If your app’s local network usage involves registering or browsing for specific Bonjour services, add a list of service types to the [`NSBonjourServices`](https://developer.apple.com/documentation/BundleResources/Information-Property-List/NSBonjourServices) property in your app’s `Info.plist`. For more information about the Bonjour operations that require this, see [Bonjour operations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Bonjour-operations) below.
Additionally, if your iOS app performs multicast operations, sign it with the [`com.apple.developer.networking.multicast`](https://developer.apple.com/documentation/BundleResources/Entitlements/com.apple.developer.networking.multicast) entitlement. For information about what constitutes a multicast operation, see [Multicast operations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Multicast-operations) below. If you use Xcode’s automatic code signing, use the [Capabilities](https://developer.apple.com/documentation/Xcode/capabilities) editor to enable this capability. If not, see [Developer Account > Reference > Provisioning with capabilities](https://developer.apple.com/help/account/reference/provisioning-with-managed-capabilities).
Important
The multicast entitlement isn’t required on macOS.
If you’re building an app extension, see [App extension considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#App-extension-considerations).
If you’re building some other sort of program for macOS—a `launchd` daemon or agent, a system extension, and so on—see [macOS considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#macOS-considerations).
If the system presents a local network alert in response to one of your local network operations, it may deny the operation immediately, before the user has responded to the alert. To handle this smoothly, use an API that supports waiting for connectivity, like Network framework or `URLSession` with [`waitsForConnectivity`](https://developer.apple.com/documentation/Foundation/URLSessionConfiguration/waitsForConnectivity) enabled. If you can’t use one of these preferred APIs, add appropriate retry logic.
For an overview of the networking APIs on Apple platforms, see [TN3151: Choosing the right networking API](https://developer.apple.com/documentation/Technotes/tn3151-choosing-the-right-networking-api).
## [Local network operations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Local-network-operations)
A local network is an IP network associated with a broadcast-capable network interface. Such interfaces include Wi-Fi and Ethernet, but not cellular (WWAN) or VPN. A local network address is any address on a local network. Traffic to a local network address goes directly; it’s not forwarded by a router.
In addition, all multicast addresses (224.0.0.0/4, ff00::/8) and the IPv4 broadcast address (255.255.255.255) are local network addresses.
Outgoing traffic to a local network address requires local network access. The following table lists some common cases:
Operation | Required  
---|---  
Making an outgoing TCP connection | yes  
Listening for and accepting incoming TCP connections | no  
Sending a UDP unicast | yes  
Sending a UDP multicast | yes  
Sending a UDP broadcast | yes  
Connecting a UDP socket | yes  
Receiving an incoming UDP unicast | no  
Receiving an incoming UDP multicast | yes  
Receiving an incoming UDP broadcast | yes  
The system implements these TCP and UDP checks deep in the networking stack, and thus they apply to all networking APIs. This includes [Network](https://developer.apple.com/documentation/Network) framework, BSD Sockets, [`URLSession`](https://developer.apple.com/documentation/Foundation/url-loading-system), and any APIs implemented on top of those.
Note these exceptions to the rules above:
  * If your device’s DNS server is on a local network, traffic to it doesn’t require local network access.
  * If your device uses a network proxy and that proxy is on a local network, traffic to it doesn’t require local network access.
  * Traffic originating from [`WKWebView`](https://developer.apple.com/documentation/WebKit/WKWebView), [`SFSafariViewController`](https://developer.apple.com/documentation/SafariServices/SFSafariViewController), and Safari doesn’t require local network access.


## [DNS operations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#DNS-operations)
Certain DNS operations also require local network access. The following table lists some common cases:
Operation | Required  
---|---  
Resolving a local DNS name | yes  
Resolving a non-local DNS name with the system resolver | no  
This check applies to a wide variety of APIs including [dnssd](https://developer.apple.com/documentation/dnssd), `<net_db.h>`, and any APIs that use them.
In this context, a local DNS name is one ending with `.local` (or `.local.`), per [RFC 6762](https://tools.ietf.org/html/rfc6762).
Additionally, Bonjour operations require local network access, as described in the next section.
## [Bonjour operations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Bonjour-operations)
All Bonjour operations require local network access.
Operation | Required  
---|---  
Registering a service with Bonjour | yes  
Browsing for Bonjour services | yes  
Resolving a Bonjour service | yes  
These checks apply to all APIs that use Bonjour, including [dnssd](https://developer.apple.com/documentation/dnssd), [Network](https://developer.apple.com/documentation/Network) framework, and Multipeer Connectivity.
Note
If you’re using Multipeer Connectivity, see [Multipeer Connectivity considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Multipeer-Connectivity-considerations).
High-level services that use Bonjour internally don’t require local network access. That’s because these services isolate your app from any details about the local network. Such services include:
Operation | Required  
---|---  
AirPlay | no  
Printing via UIKit | no  
DeviceDiscoveryUI | no  
AccessorySetupKit | no  
Some specific Bonjour operations require the multicast entitlement as well. See the next section for the details.
## [Multicast operations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Multicast-operations)
Sending or receiving multicast or broadcast traffic is a local network operation on all platforms, as described in [Local network operations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Local-network-operations). However, iOS puts additional restrictions on these operations. To send or receive multicast or broadcast traffic, sign your app with the [`com.apple.developer.networking.multicast`](https://developer.apple.com/documentation/BundleResources/Entitlements/com.apple.developer.networking.multicast) entitlement.
The following table lists some common cases.
Operation | Required  
---|---  
Sending a UDP unicast | no  
Sending a UDP multicast | yes  
Sending a UDP broadcast | yes  
Receiving an incoming UDP unicast | no  
Receiving an incoming UDP multicast | yes  
Receiving an incoming UDP broadcast | yes  
Some uncommon Bonjour operations also require the multicast entitlement.
Operation | Required  
---|---  
Working with arbitrary Bonjour service types | yes  
Browsing for all advertised service types | yes  
For information on how to browse for all advertised service types using a `_services._dns-sd._udp.local.` query, see QA1337 [Discovering all advertised Bonjour service types](https://developer.apple.com/library/archive/qa/qa1337/_index.html).
## [Multipeer Connectivity considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Multipeer-Connectivity-considerations)
[Multipeer Connectivity](https://developer.apple.com/documentation/MultipeerConnectivity) uses Bonjour internally. If your app uses Multipeer Connectivity, follow all the Bonjour guidance in this technote.
Specifically, list your Multipeer Connectivity service type in the [`NSBonjourServices`](https://developer.apple.com/documentation/BundleResources/Information-Property-List/NSBonjourServices) property. To format that entry, take your Multipeer Connectivity service type and add a leading underscore (`_`) and a trailing `._tcp`. For example, if you pass `waffle-varnish` to the `serviceType` parameter of [`init(serviceType:discoveryInfo:session:)`](https://developer.apple.com/documentation/MultipeerConnectivity/MCAdvertiserAssistant/init\(serviceType:discoveryInfo:session:\)), add `_waffle-varnish._tcp` to the [`NSBonjourServices`](https://developer.apple.com/documentation/BundleResources/Information-Property-List/NSBonjourServices) property.
## [App extension considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#App-extension-considerations)
In general, app extensions share the Local Network privilege state of their container app.
Some app extension types are assumed to be running in the background. If such an extension performs a local network operation while its Local Network privilege is undetermined, the system denies that operation as it would for an iOS app running in the background. For more on that, see [iOS considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#iOS-considerations).
Network Extension packet tunnel provider, app proxy provider, and DNS proxy provider app extensions have local network access regardless of the Local Network privilege state of their container app.
If your app has app extensions, add the [`NSLocalNetworkUsageDescription`](https://developer.apple.com/documentation/BundleResources/Information-Property-List/NSLocalNetworkUsageDescription) and [`NSBonjourServices`](https://developer.apple.com/documentation/BundleResources/Information-Property-List/NSBonjourServices) properties to the app’s `Info.plist`, not to the app extension’s.
## [iOS considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#iOS-considerations)
If an iOS app is in the background and performs a local network operation while its Local Network privilege is undetermined, the system denies that operation without presenting the local network alert. The system doesn’t record that decision. If, later on, the app performs a local network operation while in the foreground, the system presents the alert to the user as if this were the first local network operation.
App Clips can’t perform local network operations. See [Choosing the right functionality for your App Clip](https://developer.apple.com/documentation/AppClip/choosing-the-right-functionality-for-your-app-clip).
The simulator doesn’t support local network privacy. Test your local network privacy behavior on a real device.
On Shared iPad, all users share the same local network privacy state.
It _is_ possible for your app to trigger the local network alert when the device is “off Wi-Fi”, that is, when there’s no Wi-Fi symbol in the status bar. An easy way to demonstrate this is to perform a Bonjour operation with peer-to-peer Wi-Fi enabled, but there lots of other ways this can happen.
The above is true regardless of whether the device has cellular networking or not.
For more information about peer-to-peer Wi-Fi, see [TN3151: Choosing the right networking API](https://developer.apple.com/documentation/Technotes/tn3151-choosing-the-right-networking-api).
iOS 18 has a bug (FB14321888) that can cause the in-memory and persistent state of local network privacy to get out of sync after changing the user preference multiple times. This bug was fixed in iOS 18.6. If you encounter unexpected behavior on iOS 18, update to iOS 18.6 or later.
## [macOS considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#macOS-considerations)
macOS maintains separate local network privacy state for each user account.
macOS automatically allows local network access by:
  * Any daemon started by `launchd`
  * Any program running as root
  * Command-line tools run from Terminal or over SSH, including any child processes they spawn


Important
The exception for `launchd` daemons doesn’t apply to `launchd` agents. If you’re building a `launchd` agent, see the discussion below.
If you’re creating some other type of program, expect the system to block its local network operations until the user grants it the Local Network privilege.
When a process performs a local network operation, macOS tries to track down the responsible code. For example, if your app spawns a helper tool and the helper tool performs a local network operation, macOS considers the app to be the responsible code.
macOS uses the responsible code to:
  * Show a meaningful app name and usage description in the local network alert
  * Record the user’s choice for the whole app, not just that specific helper tool
  * Present that choice in System Settings


If you ship a `launchd` agent that’s not installed using `SMAppService`, make macOS aware of the responsible code by setting the `AssociatedBundleIdentifiers` property in your `launchd` property list. See the `launchd.plist` man page for details. For information on how to access that documentation, see [Reading UNIX Manual Pages](https://developer.apple.com/documentation/os/reading-unix-manual-pages).
Most standalone executables—that is, executables that aren’t the main executable for a bundle—don’t need the [`NSLocalNetworkUsageDescription`](https://developer.apple.com/documentation/BundleResources/Information-Property-List/NSLocalNetworkUsageDescription) property because they’re either:
  * Automatically allowed local network access, for example, daemons and command-line tools
  * Have an app that acts as their responsible code, for example, a helper tool


If you manage to create a standalone executable that does need the [`NSLocalNetworkUsageDescription`](https://developer.apple.com/documentation/BundleResources/Information-Property-List/NSLocalNetworkUsageDescription) property, add it to an `Info.plist` that’s embedded in your executable. In Xcode, set this up using the [Create Info.plist Section in Binary](https://developer.apple.com/documentation/Xcode/build-settings-reference#Create-Infoplist-Section-in-Binary) build setting.
macOS 15.1 fixed a number of local network privacy bugs. If you encounter local network privacy problems on macOS 15.0, retest on macOS 15.1 or later.
People might see unexpected behavior in System Settings > Privacy & Security if they have multiple versions of the same app installed (FB15568200).
macOS fails to display the local network alert when a process with a very short lifespan performs a local network operation (FB16131937). For example, if you create a `launchd` agent that performs a local network operation and immediately exits when that fails, macOS won’t display the local network alert. To work around this, update your code to not exit immediately after a local network operation fails.
For the latest news about local network privacy, see the [macOS Release Notes](https://developer.apple.com/documentation/macos-release-notes).
## [Build-time considerations](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Build-time-considerations)
Local network privacy tracks the identity of your program using its code signature. This presents a challenge on macOS, which allows for unsigned code and ad hoc signed code (Xcode displays this as Sign to Run Locally). To ensure that local network privacy reliably tracks the identity of your macOS program, sign it with an Apple-issued code-signing identity. To learn more about code-signing identities, see [TN3161: Inside Code Signing: Certificates](https://developer.apple.com/documentation/technotes/tn3161-inside-code-signing-certificates). To learn more about how macOS tracks a program’s identity, see [TN3127: Inside Code Signing: Requirements](https://developer.apple.com/documentation/technotes/tn3127-inside-code-signing-requirements).
Local network privacy uses your main executable UUID as part of its implementation. If your main executable has no UUID, or shares a UUID with other programs, local network privacy may behave weirdly. To fix that, make sure your main executable has a UUID and that it’s unique. For more about this, see [TN3178: Checking for and resolving build UUID problems](https://developer.apple.com/documentation/Technotes/tn3178-checking-for-and-resolving-build-uuid-problems).
## [Reset local network state](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Reset-local-network-state)
During testing, you might want to reset your program’s Local Network privilege to the undetermined state. Your options for this vary by platform.
On iOS, the easiest option is to delete your app.
Alternatively, if you don’t want to delete your app for some reason, reset the entire privacy subsystem using Settings > General > Transfer or Reset > Reset > Reset Location & Privacy.
On macOS there’s no way to reset your program’s Local Network privilege to the undetermined state (FB14944392). One alternative is to run your program in a virtual machine (VM). To retest, restore the VM from a snapshot taken before you installed your program.
Alternatively, create a new user account and run your test there. Remember that macOS maintains separate local network privacy state for each user account.
## [Trigger the local network alert](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Trigger-the-local-network-alert)
You don’t need to do anything special to bring up the local network alert. The system displays it automatically when your program performs a local network operation. In most cases that’s the correct behavior. The user is more likely to grant your program the Local Network privilege if they understand the context of the request.
However, in specific circumstances it may be necessary to manually bring up the local network privacy alert. For example, the user might have configured your program to perform a local network operation at some point in the future, when they’re not able to respond to the alert.
There’s no API to explicitly bring up the local network alert (FB8711182), but you can do this implicitly by performing a local network operation. One approach that works well is to connect a UDP socket to a local network address. This triggers the local network alert without generating any network traffic.
The following code shows how to do this in a general fashion:
```
/// Attempts to trigger the local network privacy alert.
/// 
/// This builds a list of link-local IPv6 addresses and then creates a connected
/// UDP socket to each in turn.  Connecting a UDP socket triggers the local
/// network alert without actually sending any traffic.
/// 
/// This is a ‘best effort’ approach, and it handles errors by ignoring them.
/// There’s no guarantee that it’ll actually trigger the alert (FB8711182).


func triggerLocalNetworkPrivacyAlert() {
    let addresses = selectedLinkLocalIPv6Addresses()
    for address in addresses {
        let sock6 = socket(AF_INET6, SOCK_DGRAM, 0)
        guard sock6 >= 0 else { return }
        defer { close(sock6) }


        withUnsafePointer(to: address) { sa6 in
            sa6.withMemoryRebound(to: sockaddr.self, capacity: 1) { sa in
                _ = connect(sock6, sa, socklen_t(sa.pointee.sa_len)) >= 0
            }
        }
    }
}


/// Returns a selection of IPv6 addresses to connect to.
///
/// To build this list it:
///
/// 1. Finds the IPv6 address of every broadcast-capable interface.
///
/// 2. Filters out all the ones that aren’t link-local.
///
/// 3. Sets the port number to port 9, that is, the discard service.  Even
///    though the caller won’t actually send any traffic, this ensures that it
///    would be discarded if it were sent.
///
/// 4. Creates two copies of each address, and replaces the host part with a
///    random number.


private func selectedLinkLocalIPv6Addresses() -> [sockaddr_in6]
{
    let r1 = (0..<8).map { _ in UInt8.random(in: 0...255) }
    let r2 = (0..<8).map { _ in UInt8.random(in: 0...255) }
    return Array(ipv6AddressesOfBroadcastCapableInterfaces()
        .filter { isIPv6AddressLinkLocal($0) }
        .map { var addr = $0 ; addr.sin6_port = UInt16(9).bigEndian ; return addr }
        .map { [setIPv6LinkLocalAddressHostPart(of: $0, to: r1), setIPv6LinkLocalAddressHostPart(of: $0, to: r2)] }
        .joined())
}


/// Replaces the host part of an IPv6 link-local address with the supplied
/// value.
///
/// In this context, _host part_ refers to the bottom 64-bits of the address,
/// that is, the `interface ID` as defined in Section 2.5.6 of [RFC
/// 4291](https://tools.ietf.org/html/rfc4291)).  Thus, the host part parameter
/// must be exactly 8 bytes.


private func setIPv6LinkLocalAddressHostPart(of address: sockaddr_in6, to hostPart: [UInt8]) -> sockaddr_in6 {
    precondition(hostPart.count == 8)
    var result = address
    withUnsafeMutableBytes(of: &result.sin6_addr) { buf in
        buf[8...].copyBytes(from: hostPart)
    }
    return result
}


/// Returns whether the supplied IPv6 address is link-local.
///
/// Link-local address have the fe:c0/10 prefix.


private func isIPv6AddressLinkLocal(_ address: sockaddr_in6) -> Bool {
    address.sin6_addr.__u6_addr.__u6_addr8.0 == 0xfe
        && (address.sin6_addr.__u6_addr.__u6_addr8.1 & 0xc0) == 0x80
}


/// Returns the IPv6 address of every broadcast-capable interface.


private func ipv6AddressesOfBroadcastCapableInterfaces() -> [sockaddr_in6] {
    var addrList: UnsafeMutablePointer<ifaddrs>? = nil
    let err = getifaddrs(&addrList)
    guard err == 0, let start = addrList else { return [] }
    defer { freeifaddrs(start) }
    return sequence(first: start, next: { $0.pointee.ifa_next })
        .compactMap { i -> sockaddr_in6? in
            guard
                (i.pointee.ifa_flags & UInt32(bitPattern: IFF_BROADCAST)) != 0,
                let sa = i.pointee.ifa_addr,
                sa.pointee.sa_family == AF_INET6,
                sa.pointee.sa_len >= MemoryLayout<sockaddr_in6>.size
            else { return nil }
            return UnsafeRawPointer(sa).load(as: sockaddr_in6.self)
        }
}

```

## [Check for local network access](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Check-for-local-network-access)
There’s no general API that returns whether the current process has local network access (FB8711182). There are, however, a couple of techniques you can use in specific circumstances.
If you’re using Bonjour, check whether your operation is waiting with the `kDNSServiceErr_PolicyDenied` (-65570) error. For example, for an `NWBrowser` object, your state update handler might look like this:
```
 browser.stateUpdateHandler = { state in
    switch state {
    case .waiting(let error):
        switch error {
        case .dns(let code):
            switch Int(code) {
            case kDNSServiceErr_PolicyDenied:
                … no local network access …
            …
            }
        …
        }
    …
    }
}

```

If your goal is to make a TCP connection to a local network address, manage that connection with [`NWConnection`](https://developer.apple.com/documentation/Network/NWConnection). If your program doesn’t have local network access, the connection enters the [`NWConnection.State.waiting(_:)`](https://developer.apple.com/documentation/Network/NWConnection/State-swift.enum/waiting\(_:\)) state and the current path lists an unsatisfied reason of [`NWPath.UnsatisfiedReason.localNetworkDenied`](https://developer.apple.com/documentation/Network/NWPath/UnsatisfiedReason-swift.enum/localNetworkDenied). To check for that:
```
let connection: NWConnection = … your existing logic …
connection.stateUpdateHandler = { state in
    switch state {
    case .waiting(_):
        if case .localNetworkDenied? = connection.currentPath?.unsatisfiedReason {
            … no local network access …
        }
    … other states …
    }
}

```

If the user subsequently changes the Local Network privilege to grant your program local network access, the system automatically retries the connection.
If your program successfully made a TCP connection to a local network address and then the user changed the Local Network privilege to deny it local network access, the connection closes. When you open a new connection, it enters the [`NWConnection.State.waiting(_:)`](https://developer.apple.com/documentation/Network/NWConnection/State-swift.enum/waiting\(_:\)) state as described above.
If these techniques don’t meet all of your requirements, file an [enhancement request](https://developer.apple.com/bug-reporting/) with the details.
## [Unexpected local network alert](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Unexpected-local-network-alert)
In most cases it’s easy to understand why you’re seeing the local network alert. You do something in your program that performs a local network operation, and the system presents the alert.
However, in some cases the local network alert shows up unexpectedly. A common cause of this is third-party libraries, where a library performs a local network operation for no obvious reason. For example, a library might access the local network as soon as you initialize it.
There’s no direct way to track down unexpected local network operations. Your best option is to remove code from your program until it stops presenting the local network alert. Once that happens, add smaller chunks of code back into your program to home in on the cause.
That process might lead to a third-party library for which you don’t have the source code. If that happens, raise this issue with the library’s vendor.
## [Identify the Wi-Fi interface correctly](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Identify-the-Wi-Fi-interface-correctly)
Some iOS apps assume that the Wi-Fi interface name is always `en0`. This isn’t a valid assumption. BSD interface names, like `en0`, aren’t considered API on any Apple platform. If you write code based on this false assumption and deploy your app to a wide range of users, your app will fail for a small fraction of those users.
The reports from these users might suggest that local network privacy is misbehaving. For example, a user might report that they did a local network operation and no local network alert showed up. However, local network privacy is working correctly. The real problem is that you’re assuming that `en0` is the Wi-Fi interface, and it isn’t.
Important
To avoid problems like this, don’t hard code BSD interface names like `en0`.
In many cases you can avoid this problem by reworking your code. For example, if you’re building a custom service discovery protocol on top of UDP broadcasts, life will be easier if you use Bonjour instead. For more information about Bonjour, see [TN3151: Choosing the right networking API](https://developer.apple.com/documentation/Technotes/tn3151-choosing-the-right-networking-api).
If you can’t use Bonjour—perhaps you’re working with an accessory with legacy firmware—run your service discovery code on _all_ broadcast-capable interfaces. Not only does that avoid this problem, but folks who have their devices plugged into Ethernet will love you forever!
If you must work with a specific type of interface, call `getifaddrs` to get the full interface list and then filter that list by the interface type. Get the functional type of the interface using the `SIOCGIFFUNCTIONALTYPE` ioctl.
## [Revision History](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Revision-History)
  * **2025-07-18** Added information about two bugs (FB14321888, FB16131937). Updated the _Build-time considerations_ section to cover macOS code signing.
  * **2024-10-31** Rewritten and republished as TN3179.
  * **2020-10-16** First posted as the _Local Network Privacy FAQ_ on the Apple Developer Forums.


## [See Also](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#see-also)
### [Latest](https://developer.apple.com/documentation/technotes/tn3179-understanding-local-network-privacy#Latest)
[TN3190: USB audio device design considerations](https://developer.apple.com/documentation/technotes/tn3190-usb-audio-device-design-considerations)
Learn the best techniques for designing devices that conform to the USB Audio Device Class specifications.
[TN3194: Handling account deletions and revoking tokens for Sign in with Apple](https://developer.apple.com/documentation/technotes/tn3194-handling-account-deletions-and-revoking-tokens-for-sign-in-with-apple)
Learn the best techniques for managing Sign in with Apple user sessions and responding to account deletion requests.
[TN3193: Managing the on-device foundation model’s context window](https://developer.apple.com/documentation/technotes/tn3193-managing-the-on-device-foundation-model-s-context-window)
Learn how to budget for the context window limit of Apple’s on-device foundation model and handle the error when reaching the limit.
[TN3115: Bluetooth State Restoration app relaunch rules](https://developer.apple.com/documentation/technotes/tn3115-bluetooth-state-restoration-app-relaunch-rules)
Learn about the conditions under which an iOS app will be relaunched by Bluetooth State Restoration.
[TN3192: Migrating your iPad app from the deprecated UIRequiresFullScreen key](https://developer.apple.com/documentation/technotes/tn3192-migrating-your-app-from-the-deprecated-uirequiresfullscreen-key)
Support iPad multitasking and dynamic resizing while updating your app to remove the deprecated full-screen compatibility mode.
[TN3151: Choosing the right networking API](https://developer.apple.com/documentation/technotes/tn3151-choosing-the-right-networking-api)
Learn which networking API is best for you.
[TN3111: iOS Wi-Fi API overview](https://developer.apple.com/documentation/technotes/tn3111-ios-wifi-api-overview)
Explore the various Wi-Fi APIs available on iOS and their expected use cases.
[TN3191: IMAP extensions supported by Mail for iOS, iPadOS, and visionOS](https://developer.apple.com/documentation/technotes/tn3191-imap-extensions-supported-by-mail)
Learn which extensions to the RFC 3501 IMAP protocol are supported by Mail for iOS, iPadOS, and visionOS.
[TN3134: Network Extension provider deployment](https://developer.apple.com/documentation/technotes/tn3134-network-extension-provider-deployment)
Explore the platforms, packaging, OS versions, and device configurations for Network Extension provider deployment.
[TN3189: Managing Mail background traffic load](https://developer.apple.com/documentation/technotes/tn3189-managing-mail-background-traffic-load)
Identify iOS Mail background traffic and manage its impact on your IMAP server.
[TN3187: Migrating to the UIKit scene-based life cycle](https://developer.apple.com/documentation/technotes/tn3187-migrating-to-the-uikit-scene-based-life-cycle)
Update your app to receive scene-based life-cycle events and manage your user interface using scene objects and methods.
[TN3188: Troubleshooting In-App Purchases availability in the App Store](https://developer.apple.com/documentation/technotes/tn3188-troubleshooting-in-app-purchases-availability-in-the-app-store)
Verify your In-App Purchases are approved and available for sale in the App Store.
[TN3186: Troubleshooting In-App Purchases availability in the sandbox](https://developer.apple.com/documentation/technotes/tn3186-troubleshooting-in-app-purchases-availability-in-the-sandbox)
Identify common configurations that make your In-App Purchases unavailable in the sandbox environment.
[TN3185: Troubleshooting In-App Purchases availability in Xcode](https://developer.apple.com/documentation/technotes/tn3185-troubleshooting-in-app-purchases-availability-in-xcode)
Inspect your active StoreKit configuration file for unexpected configurations.
[TN3182: Adding privacy tracking keys to your privacy manifest](https://developer.apple.com/documentation/technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest)
Declare the tracking domains you use in your app or third-party SDK in a privacy manifest.
Current page is TN3179: Understanding local network privacy 
[Apple](https://www.apple.com)
  1. [Developer](https://developer.apple.com/)
  2. [ Documentation ](https://developer.apple.com/documentation/)


###  Platforms 
Toggle Menu 
  * [iOS](https://developer.apple.com/ios/)
  * [iPadOS](https://developer.apple.com/ipados/)
  * [macOS](https://developer.apple.com/macos/)
  * [tvOS](https://developer.apple.com/tvos/)
  * [visionOS](https://developer.apple.com/visionos/)
  * [watchOS](https://developer.apple.com/watchos/)


###  Tools 
Toggle Menu 
  * [Swift](https://developer.apple.com/swift/)
  * [SwiftUI](https://developer.apple.com/swiftui/)
  * [Swift Playground](https://developer.apple.com/swift-playground/)
  * [TestFlight](https://developer.apple.com/testflight/)
  * [Xcode](https://developer.apple.com/xcode/)
  * [Xcode Cloud](https://developer.apple.com/xcode-cloud/)
  * [SF Symbols](https://developer.apple.com/sf-symbols/)


###  Topics & Technologies 
Toggle Menu 
  * [Accessibility](https://developer.apple.com/accessibility/)
  * [Accessories](https://developer.apple.com/accessories/)
  * [App Extension](https://developer.apple.com/app-extensions/)
  * [App Store](https://developer.apple.com/app-store/)
  * [Audio & Video](https://developer.apple.com/audio/)
  * [Augmented Reality](https://developer.apple.com/augmented-reality/)
  * [Design](https://developer.apple.com/design/)
  * [Distribution](https://developer.apple.com/distribute/)
  * [Education](https://developer.apple.com/education/)
  * [Fonts](https://developer.apple.com/fonts/)
  * [Games](https://developer.apple.com/games/)
  * [Health & Fitness](https://developer.apple.com/health-fitness/)
  * [In-App Purchase](https://developer.apple.com/in-app-purchase/)
  * [Localization](https://developer.apple.com/localization/)
  * [Maps & Location](https://developer.apple.com/maps/)
  * [Machine Learning & AI](https://developer.apple.com/machine-learning/)
  * [Open Source](https://opensource.apple.com/)
  * [Security](https://developer.apple.com/security/)
  * [Safari & Web](https://developer.apple.com/safari/)


###  Resources 
Toggle Menu 
  *   * [Documentation](https://developer.apple.com/documentation/)
  * [Tutorials](https://developer.apple.com/learn/)
  * [Downloads](https://developer.apple.com/download/)
  * [Forums](https://developer.apple.com/forums/)
  * [Videos](https://developer.apple.com/videos/)


###  Support 
Toggle Menu 
  * [Support Articles](https://developer.apple.com/support/articles/)
  * [Contact Us](https://developer.apple.com/contact/)
  * [Bug Reporting](https://developer.apple.com/bug-reporting/)
  * [System Status](https://developer.apple.com/system-status/)


###  Account 
Toggle Menu 
  * [Apple Developer](https://developer.apple.com/account/)
  * [App Store Connect](https://appstoreconnect.apple.com/)
  * [Certificates, IDs, & Profiles](https://developer.apple.com/account/ios/certificate/)
  * [Feedback Assistant](https://feedbackassistant.apple.com/)


###  Programs 
Toggle Menu 
  * [Apple Developer Program](https://developer.apple.com/programs/)
  * [Apple Developer Enterprise Program](https://developer.apple.com/programs/enterprise/)
  * [App Store Small Business Program](https://developer.apple.com/app-store/small-business-program/)
  * [MFi Program](https://mfi.apple.com/)
  * [News Partner Program](https://developer.apple.com/programs/news-partner/)
  * [Video Partner Program](https://developer.apple.com/programs/video-partner/)
  * [Security Bounty Program](https://developer.apple.com/security-bounty/)
  * [Security Research Device Program](https://developer.apple.com/programs/security-research-device/)


###  Events 
Toggle Menu 
  * [Meet with Apple](https://developer.apple.com/events/)
  * [Apple Developer Centers](https://developer.apple.com/events/developer-centers/)
  * [App Store Awards](https://developer.apple.com/app-store/app-store-awards/)
  * [Apple Design Awards](https://developer.apple.com/design/awards/)
  * [Apple Developer Academies](https://developer.apple.com/academies/)
  * [WWDC](https://developer.apple.com/wwdc/)


To submit feedback on documentation, visit [Feedback Assistant](applefeedback://new?form_identifier=developertools.fba&answers%5B%3Aarea%5D=seedADC%3Adevpubs&answers%5B%3Adoc_type_req%5D=Technology%20Documentation&answers%5B%3Adocumentation_link_req%5D=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Ftechnotes%2Ftn3179-understanding-local-network-privacy).
Select a color scheme preference
Light
Dark
Auto
Copyright © 2025 [Apple Inc.](https://www.apple.com) All rights reserved. 
[ Terms of Use ](https://www.apple.com/legal/internet-services/terms/site.html)[ Privacy Policy ](https://www.apple.com/legal/privacy/)[ Agreements and Guidelines ](https://developer.apple.com/support/terms/)
