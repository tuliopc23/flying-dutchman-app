Source: https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout

[ Skip Navigation ](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout#app-main)
  * [Global Nav Open Menu](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout#ac-gn-menustate)[Global Nav Close Menu](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout)
  * [Apple Developer](https://developer.apple.com/)


[ Search Developer Cancel  ](https://developer.apple.com/search/)
  * [Apple Developer](https://developer.apple.com/)
  * [News](https://developer.apple.com/news/)
  * [Discover](https://developer.apple.com/discover/)
  * [Design](https://developer.apple.com/design/)
  * [Develop](https://developer.apple.com/develop/)
  * [Distribute](https://developer.apple.com/distribute/)
  * [Support](https://developer.apple.com/support/)
  * [Account](https://developer.apple.com/account/)
  * [](https://developer.apple.com/search/)


Cancel 
Only search within “Documentation”
### Quick Links
  * [Downloads](https://developer.apple.com/download/)
  * [Documentation](https://developer.apple.com/documentation/)
  * [Sample Code](https://developer.apple.com/documentation/samplecode/)
  * [Videos](https://developer.apple.com/videos/)
  * [Forums](https://developer.apple.com/forums/)

5 Quick Links
[ Documentation ](https://developer.apple.com/documentation)
[ Open Menu ](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout)
  * SwiftLanguage:  Swift  Objective-C 
Language: 
    * Swift 
    * [ Objective-C ](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout)


[](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout)
## [ UIKit  ](https://developer.apple.com/documentation/uikit)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
1 of 46 symbols inside <root>
Essentials
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
2 of 46 symbols inside <root> [Adopting Liquid Glass](https://developer.apple.com/documentation/technologyoverviews/adopting-liquid-glass)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
3 of 46 symbols inside <root> [UIKit updates](https://developer.apple.com/documentation/updates/uikit)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
4 of 46 symbols inside <root> [About App Development with UIKit](https://developer.apple.com/documentation/uikit/about-app-development-with-uikit)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
5 of 46 symbols inside <root> containing 3 symbols[Protecting the User’s Privacy](https://developer.apple.com/documentation/uikit/protecting-the-user-s-privacy)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
6 of 46 symbols inside <root>
App structure
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
7 of 46 symbols inside <root> containing 26 symbols[App and environment](https://developer.apple.com/documentation/uikit/app-and-environment)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
8 of 46 symbols inside <root> containing 15 symbols[Documents, data, and pasteboard](https://developer.apple.com/documentation/uikit/documents-data-and-pasteboard)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
9 of 46 symbols inside <root> containing 11 symbols[Resource management](https://developer.apple.com/documentation/uikit/resource-management)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
10 of 46 symbols inside <root> containing 12 symbols[App extensions](https://developer.apple.com/documentation/uikit/app-extensions)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
11 of 46 symbols inside <root> containing 8 symbols[Interprocess communication](https://developer.apple.com/documentation/uikit/interprocess-communication)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
12 of 46 symbols inside <root> containing 27 symbols[Mac Catalyst](https://developer.apple.com/documentation/uikit/mac-catalyst)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
13 of 46 symbols inside <root>
User interface
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
14 of 46 symbols inside <root> containing 70 symbols[Views and controls](https://developer.apple.com/documentation/uikit/views-and-controls)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
15 of 46 symbols inside <root> containing 80 symbols[View controllers](https://developer.apple.com/documentation/uikit/view-controllers)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
16 of 46 symbols inside <root> containing 17 symbols[View layout](https://developer.apple.com/documentation/uikit/view-layout)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
17 of 46 symbols inside <root> containing 26 symbols[Appearance customization](https://developer.apple.com/documentation/uikit/appearance-customization)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
18 of 46 symbols inside <root> containing 15 symbols[Animation and haptics](https://developer.apple.com/documentation/uikit/animation-and-haptics)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
16 of 39 symbols inside -397121109 containing 12 symbols[NSTextElementProvider](https://developer.apple.com/documentation/uikit/nstextelementprovider)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
17 of 39 symbols inside -397121109 
Location and selection
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
17 of 39 symbols inside -397121109 
Location and selection
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
18 of 39 symbols inside -397121109 containing 15 symbols[NSTextRange](https://developer.apple.com/documentation/uikit/nstextrange)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
19 of 39 symbols inside -397121109 containing 19 symbols[NSTextSelection](https://developer.apple.com/documentation/uikit/nstextselection)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
20 of 39 symbols inside -397121109 containing 22 symbols[NSTextSelectionNavigation](https://developer.apple.com/documentation/uikit/nstextselectionnavigation)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
21 of 39 symbols inside -397121109 containing 2 symbols[NSTextLocation](https://developer.apple.com/documentation/uikit/nstextlocation)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
22 of 39 symbols inside -397121109 
Layout
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
23 of 39 symbols inside -397121109 [Using TextKit 2 to interact with text](https://developer.apple.com/documentation/uikit/using-textkit-2-to-interact-with-text)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
24 of 39 symbols inside -397121109 [Display text with a custom layout](https://developer.apple.com/documentation/uikit/display-text-with-a-custom-layout)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
25 of 39 symbols inside -397121109 containing 42 symbols[NSTextLayoutManager](https://developer.apple.com/documentation/uikit/nstextlayoutmanager)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
26 of 39 symbols inside -397121109 containing 24 symbols[NSTextContainer](https://developer.apple.com/documentation/uikit/nstextcontainer)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
27 of 39 symbols inside -397121109 containing 29 symbols[NSTextLayoutFragment](https://developer.apple.com/documentation/uikit/nstextlayoutfragment)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
28 of 39 symbols inside -397121109 containing 15 symbols[NSTextLineFragment](https://developer.apple.com/documentation/uikit/nstextlinefragment)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
29 of 39 symbols inside -397121109 containing 13 symbols[NSTextViewportLayoutController](https://developer.apple.com/documentation/uikit/nstextviewportlayoutcontroller)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
30 of 39 symbols inside -397121109 containing 3 symbols[NSTextLayoutOrientationProvider](https://developer.apple.com/documentation/uikit/nstextlayoutorientationprovider)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
31 of 39 symbols inside -397121109 
Attachments
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
32 of 39 symbols inside -397121109 containing 20 symbols[NSTextAttachment](https://developer.apple.com/documentation/uikit/nstextattachment)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
33 of 39 symbols inside -397121109 containing 12 symbols[NSTextAttachmentViewProvider](https://developer.apple.com/documentation/uikit/nstextattachmentviewprovider)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
34 of 39 symbols inside -397121109 containing 13 symbols[NSAdaptiveImageGlyph](https://developer.apple.com/documentation/uikit/nsadaptiveimageglyph)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
35 of 39 symbols inside -397121109 containing 4 symbols[NSTextAttachmentContainer](https://developer.apple.com/documentation/uikit/nstextattachmentcontainer)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
rP
36 of 39 symbols inside -397121109 containing 4 symbols[NSTextAttachmentLayout](https://developer.apple.com/documentation/uikit/nstextattachmentlayout)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
37 of 39 symbols inside -397121109 
TextKit 1
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
38 of 39 symbols inside -397121109 containing 33 symbols[NSTextStorage](https://developer.apple.com/documentation/uikit/nstextstorage)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
39 of 39 symbols inside -397121109 containing 137 symbols[NSLayoutManager](https://developer.apple.com/documentation/uikit/nslayoutmanager)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
35 of 46 symbols inside <root> containing 56 symbols[Keyboards and input](https://developer.apple.com/documentation/uikit/keyboards-and-input)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
36 of 46 symbols inside <root> containing 14 symbols[Writing Tools](https://developer.apple.com/documentation/uikit/writing-tools)
85 items were found. Tab back to navigate through them. 
/ 
Navigator is ready 
  * [ UIKit ](https://developer.apple.com/documentation/uikit)
  * [ TextKit ](https://developer.apple.com/documentation/uikit/textkit)
  * [ Display text with a custom layout ](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout)
  *     * [ TextKit ](https://developer.apple.com/documentation/uikit/textkit)
    * Display text with a custom layout 


Sample Code
# Display text with a custom layout
Lay out text in a custom-shaped container and apply glyph substitutions.
[ Download ](https://docs-assets.developer.apple.com/published/c94cdd160e47/DisplayTextWithACustomLayout.zip)
iOS 13.0+iPadOS 13.0+Xcode 12.0+
## [Overview](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout#Overview)
Some apps, such as book and magazine readers, text editors, and games, may need to lay out their text in a way that better fits their app style. TextKit provides a set of APIs for these apps to implement a custom text layout. This sample demonstrates how to use the APIs to display text in a circular container and in a two-column container, how to set up an exclusive area for a text container, and how to substitute a glyph without changing the text storage.
### [Implement a custom-shaped text container](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout#Implement-a-custom-shaped-text-container)
When laying out a line of text, TextKit calls the [`lineFragmentRect(forProposedRect:at:writingDirection:remaining:)`](https://developer.apple.com/documentation/uikit/nstextcontainer/linefragmentrect\(forproposedrect:at:writingdirection:remaining:\)) method from [`NSTextContainer`](https://developer.apple.com/documentation/uikit/nstextcontainer) to determine the position and size of the line, which TextKit calls a _line fragment rectangle_. By creating a subclass of `NSTextContainer` to return a custom line fragment rectangle in the method, apps can implement a custom-shaped text container.
This sample uses the `CircleTextContainer` class to implement a circular text container. To calculate a line fragment rectangle that fits in the inscribed circle of the container’s bounds, the class calls the implementation of `super` to retrieve the default rectangle, then adjusts its `origin.x` and `width` according to the current line origin and container size.
```
override func lineFragmentRect(forProposedRect proposedRect: CGRect,
                               at characterIndex: Int,
                               writingDirection baseWritingDirection: NSWritingDirection,
                               remaining remainingRect: UnsafeMutablePointer<CGRect>?) -> CGRect {
    let rect = super.lineFragmentRect(forProposedRect: proposedRect,
                                      at: characterIndex,
                                      writingDirection: baseWritingDirection,
                                      remaining: remainingRect)
    let containerWidth = Float(size.width), containerHeight = Float(size.height)


    let diameter = fminf(containerWidth, containerHeight)
    let radius = diameter / 2.0
    
    // Vertical distance from the line center to the container center.
    let yDistance = fabsf(Float(rect.origin.y + rect.size.height / 2.0) - radius)
    // The new line width.
    let width = (yDistance < radius) ? 2.0 * sqrt(radius * radius - yDistance * yDistance) : 0.0
    // Horizontal distance from rect.origin.x to the starting point of the line.
    let xOffset = (containerWidth > diameter) ? (containerWidth - diameter) / 2.0 : 0.0
    // The starting x of the line.
    let xPosition = CGFloat(xOffset + Float(rect.origin.x) + radius - width / 2.0)
    return CGRect(x: xPosition, y: CGFloat(rect.origin.y), width: CGFloat(width), height: rect.size.height)
}

```

### [Lay out text with a custom text container](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout#Lay-out-text-with-a-custom-text-container)
To lay out text with a custom text container, apps simply set up a text view with the container, and let TextKit do the rest. The [`init(frame:textContainer:)`](https://developer.apple.com/documentation/uikit/uitextview/init\(frame:textcontainer:\)) method from [`UITextView`](https://developer.apple.com/documentation/uikit/uitextview) serves this purpose, and this sample uses it to create a `UITextView` instance with its circular text container.
```
let textContainer = CircleTextContainer(size: .zero)
textContainer.widthTracksTextView = true


let layoutManager = NSLayoutManager()
layoutManager.addTextContainer(textContainer)
textStorage.addLayoutManager(layoutManager)


textView = UITextView(frame: CGRect.zero, textContainer: textContainer)

```

With this configuration, the TextKit class that coordinates the layout and display of characters, [`NSLayoutManager`](https://developer.apple.com/documentation/uikit/nslayoutmanager), automatically uses the line fragment rectangles that `CircleTextContainer` returns to lay out the text.
`NSLayoutManager` supports laying out text in multiple text containers, so implementing a two-column layout is as easy as adding a second text container to the layout manager, as the code below shows:
```
let firstTextContainer = NSTextContainer()
firstTextContainer.widthTracksTextView = true
firstTextContainer.heightTracksTextView = true


let secondTextContainer = NSTextContainer()
secondTextContainer.widthTracksTextView = true
secondTextContainer.heightTracksTextView = true
secondTextContainer.lineBreakMode = .byTruncatingTail


let layoutManager = NSLayoutManager()
layoutManager.addTextContainer(firstTextContainer)
layoutManager.addTextContainer(secondTextContainer)


textStorage.addLayoutManager(layoutManager)


let firstTextView = UITextView(frame: .zero, textContainer: firstTextContainer)
firstTextView.isScrollEnabled = false
view.addSubview(firstTextView)


let secondTextView = UITextView(frame: .zero, textContainer: secondTextContainer)
secondTextView.isScrollEnabled = false
view.addSubview(secondTextView)

```

Note that after adding a second text container to the layout manager, the text views become uneditable and unselectable.
### [Reserve an area in a text container](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout#Reserve-an-area-in-a-text-container)
To create an appealing UI, some apps may have their text wrap around a certain shape. They can achieve that by using the [`exclusionPaths`](https://developer.apple.com/documentation/uikit/nstextcontainer/exclusionpaths) property from `NSTextContainer` to reserve an exclusive area for the shape in a text container.
This sample uses the following code to set up an exclusive area where `translatedCirclePath` is a [`UIBezierPath`](https://developer.apple.com/documentation/uikit/uibezierpath) instance using the text container’s coordinate system.
```
textView.textContainer.exclusionPaths = [translatedCirclePath]

```

### [Substitute glyphs without changing the text storage](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout#Substitute-glyphs-without-changing-the-text-storage)
When a text container doesn’t have enough space to display text, apps may need a way to indicate that the container has additional, or _overflow_ , text. A standard text container can use the [`lineBreakMode`](https://developer.apple.com/documentation/uikit/nstextcontainer/linebreakmode) property from `NSTextContainer` to add an ending ellipsis that helps handle this situation, but the property doesn’t completely support custom-shaped containers like `CircleTextContainer`.
To show an overflow indicator in its circular text container, as well as to demonstrate TextKit’s capability of glyph substitutions and layout adjustment, this sample substitutes the glyphs of the container’s ending characters with an ellipsis, and makes it the container’s last visible glyph.
The ending characters are the characters of the last words with a total width that is larger than an ellipsis. The characters have to be wider so that the text container has enough space to display the ellipsis. However, because they are wider, the text container has extra space after the glyph substitution, which can drag in more characters. To avoid showing text after the ellipsis, this sample implements a second glyph substitution by selecting the character next to the container’s last word, and substituting it with a control glyph that uses the [`whitespace`](https://developer.apple.com/documentation/uikit/nslayoutmanager/controlcharacteraction/whitespace) action. Using this substitution, the character becomes a whitespace with a width that is flexible. With this flexible space character, the sample can fill up the extra space and push the extra characters to the next line, and then move the line out of the text container.
The detailed implementation of the glyphs substitutions and the layout adjustment is as follows:
  * Begin the glyph substitutions by invalidating the glyphs and layout of the ending characters.


```
layoutManager.invalidateGlyphs(forCharacterRange: endingWordsCharRange, changeInLength: 0,
                               actualCharacterRange: nil)
layoutManager.invalidateLayout(forCharacterRange: endingWordsCharRange,
                               actualCharacterRange: nil)

```

  * Implement the [`layoutManager(_:shouldGenerateGlyphs:properties:characterIndexes:font:forGlyphRange:)`](https://developer.apple.com/documentation/uikit/nslayoutmanagerdelegate/layoutmanager\(_:shouldgenerateglyphs:properties:characterindexes:font:forglyphrange:\)) method from [`NSLayoutManagerDelegate`](https://developer.apple.com/documentation/uikit/nslayoutmanagerdelegate) to substitute the glyphs. TextKit calls this delegate method before storing the glyphs to give apps an opportunity to change the glyphs and their properties.


```
let ellipsisStartIndex = ellipsisIntersection.location
for index in ellipsisStartIndex..<ellipsisStartIndex + ellipsisIntersection.length {
    if index == ellipsisGlyphRange!.location {
        finalGlyphs[index - glyphRange.location] = myGlyphs[0]
    } else {
        finalProps[index - glyphRange.location] = .controlCharacter
    }
}
let flexibleSpaceStartIndex = flexibleSpaceIntersection.location
for index in  flexibleSpaceStartIndex..<flexibleSpaceStartIndex + flexibleSpaceIntersection.length {
    finalProps[index - glyphRange.location] = .controlCharacter
}

```

  * Implement the [`layoutManager(_:shouldUse:forControlCharacterAt:)`](https://developer.apple.com/documentation/uikit/nslayoutmanagerdelegate/layoutmanager\(_:shoulduse:forcontrolcharacterat:\)) method to return the `NSLayoutManager.ControlCharacterAction.whitespace` action for the flexible space character.


```
func layoutManager(_ layoutManager: NSLayoutManager, shouldUse action: NSLayoutManager.ControlCharacterAction,
                   forControlCharacterAt charIndex: Int) -> NSLayoutManager.ControlCharacterAction {
    if let flexibleSpaceGlyphRange = self.flexibleSpaceGlyphRange,
        flexibleSpaceGlyphRange.contains(layoutManager.glyphIndexForCharacter(at: charIndex)) {
        return .whitespace
    }
    return action
}

```

  * Implement the [`layoutManager(_:boundingBoxForControlGlyphAt:for:proposedLineFragment:glyphPosition:characterIndex:)`](https://developer.apple.com/documentation/uikit/nslayoutmanagerdelegate/layoutmanager\(_:boundingboxforcontrolglyphat:for:proposedlinefragment:glyphposition:characterindex:\)) method to return a bounding box that can fill up the current line fragment rectangle.


```
func layoutManager(_ layoutManager: NSLayoutManager,
                   boundingBoxForControlGlyphAt glyphIndex: Int,
                   for textContainer: NSTextContainer,
                   proposedLineFragment proposedRect: CGRect,
                   glyphPosition: CGPoint,
                   characterIndex charIndex: Int) -> CGRect {
    guard let flexibleSpaceGlyphRange = self.flexibleSpaceGlyphRange,
        flexibleSpaceGlyphRange.contains(glyphIndex) else {
        return CGRect(x: glyphPosition.x, y: glyphPosition.y, width: 0, height: proposedRect.height)
    }
    let padding = textContainer.lineFragmentPadding * 2
    let width = proposedRect.width - (glyphPosition.x - proposedRect.minX) - padding
    let rect = CGRect(x: glyphPosition.x, y: glyphPosition.y, width: width, height: proposedRect.height)
    return rect
}

```

  * Implement the [`layoutManager(_:shouldSetLineFragmentRect:lineFragmentUsedRect:baselineOffset:in:forGlyphRange:)`](https://developer.apple.com/documentation/uikit/nslayoutmanagerdelegate/layoutmanager\(_:shouldsetlinefragmentrect:linefragmentusedrect:baselineoffset:in:forglyphrange:\)) method to move the extra line out of the text container.


```
func layoutManager(_ layoutManager: NSLayoutManager,
                   shouldSetLineFragmentRect lineFragmentRect: UnsafeMutablePointer<CGRect>,
                   lineFragmentUsedRect: UnsafeMutablePointer<CGRect>,
                   baselineOffset: UnsafeMutablePointer<CGFloat>,
                   in textContainer: NSTextContainer,
                   forGlyphRange glyphRange: NSRange) -> Bool {
    guard let ellipsisGlyphRange = self.ellipsisGlyphRange,
        glyphRange.location > ellipsisGlyphRange.location else {
            return false
    }
    let originX = textContainer.size.width
    lineFragmentRect.pointee.origin = CGPoint(x: originX, y: lineFragmentRect.pointee.origin.y)
    return true
}

```

## [See Also](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout#see-also)
### [Layout](https://developer.apple.com/documentation/UIKit/display-text-with-a-custom-layout#Layout)
[Using TextKit 2 to interact with text](https://developer.apple.com/documentation/uikit/using-textkit-2-to-interact-with-text)
Interact with text by managing text selection and inserting custom text elements.
[`class NSTextLayoutManager`](https://developer.apple.com/documentation/uikit/nstextlayoutmanager)
The primary class that you use to manage text layout and presentation for custom text displays.
[`class NSTextContainer`](https://developer.apple.com/documentation/uikit/nstextcontainer)
A region where text layout occurs.
[`class NSTextLayoutFragment`](https://developer.apple.com/documentation/uikit/nstextlayoutfragment)
A class that represents the layout fragment typically corresponding to a rendering surface, such as a layer or view subclass.
[`class NSTextLineFragment`](https://developer.apple.com/documentation/uikit/nstextlinefragment)
A class that represents a line fragment as a single textual layout and rendering unit inside a text layout fragment.
[`class NSTextViewportLayoutController`](https://developer.apple.com/documentation/uikit/nstextviewportlayoutcontroller)
Manages the layout process inside the viewport interacting with its delegate.
[`protocol NSTextLayoutOrientationProvider`](https://developer.apple.com/documentation/uikit/nstextlayoutorientationprovider)
A set of methods that define the orientation of text for an object.
Current page is Display text with a custom layout 
[Apple](https://www.apple.com)
  1. [Developer](https://developer.apple.com/)
  2. [ Documentation ](https://developer.apple.com/documentation/)


###  Platforms 
Toggle Menu 
  * [iOS](https://developer.apple.com/ios/)
  * [iPadOS](https://developer.apple.com/ipados/)
  * [macOS](https://developer.apple.com/macos/)
  * [tvOS](https://developer.apple.com/tvos/)
  * [visionOS](https://developer.apple.com/visionos/)
  * [watchOS](https://developer.apple.com/watchos/)


###  Tools 
Toggle Menu 
  * [Swift](https://developer.apple.com/swift/)
  * [SwiftUI](https://developer.apple.com/swiftui/)
  * [Swift Playground](https://developer.apple.com/swift-playground/)
  * [TestFlight](https://developer.apple.com/testflight/)
  * [Xcode](https://developer.apple.com/xcode/)
  * [Xcode Cloud](https://developer.apple.com/xcode-cloud/)
  * [SF Symbols](https://developer.apple.com/sf-symbols/)


###  Topics & Technologies 
Toggle Menu 
  * [Accessibility](https://developer.apple.com/accessibility/)
  * [Accessories](https://developer.apple.com/accessories/)
  * [App Extension](https://developer.apple.com/app-extensions/)
  * [App Store](https://developer.apple.com/app-store/)
  * [Audio & Video](https://developer.apple.com/audio/)
  * [Augmented Reality](https://developer.apple.com/augmented-reality/)
  * [Design](https://developer.apple.com/design/)
  * [Distribution](https://developer.apple.com/distribute/)
  * [Education](https://developer.apple.com/education/)
  * [Fonts](https://developer.apple.com/fonts/)
  * [Games](https://developer.apple.com/games/)
  * [Health & Fitness](https://developer.apple.com/health-fitness/)
  * [In-App Purchase](https://developer.apple.com/in-app-purchase/)
  * [Localization](https://developer.apple.com/localization/)
  * [Maps & Location](https://developer.apple.com/maps/)
  * [Machine Learning & AI](https://developer.apple.com/machine-learning/)
  * [Open Source](https://opensource.apple.com/)
  * [Security](https://developer.apple.com/security/)
  * [Safari & Web](https://developer.apple.com/safari/)


###  Resources 
Toggle Menu 
  *   * [Documentation](https://developer.apple.com/documentation/)
  * [Tutorials](https://developer.apple.com/learn/)
  * [Downloads](https://developer.apple.com/download/)
  * [Forums](https://developer.apple.com/forums/)
  * [Videos](https://developer.apple.com/videos/)


###  Support 
Toggle Menu 
  * [Support Articles](https://developer.apple.com/support/articles/)
  * [Contact Us](https://developer.apple.com/contact/)
  * [Bug Reporting](https://developer.apple.com/bug-reporting/)
  * [System Status](https://developer.apple.com/system-status/)


###  Account 
Toggle Menu 
  * [Apple Developer](https://developer.apple.com/account/)
  * [App Store Connect](https://appstoreconnect.apple.com/)
  * [Certificates, IDs, & Profiles](https://developer.apple.com/account/ios/certificate/)
  * [Feedback Assistant](https://feedbackassistant.apple.com/)


###  Programs 
Toggle Menu 
  * [Apple Developer Program](https://developer.apple.com/programs/)
  * [Apple Developer Enterprise Program](https://developer.apple.com/programs/enterprise/)
  * [App Store Small Business Program](https://developer.apple.com/app-store/small-business-program/)
  * [MFi Program](https://mfi.apple.com/)
  * [News Partner Program](https://developer.apple.com/programs/news-partner/)
  * [Video Partner Program](https://developer.apple.com/programs/video-partner/)
  * [Security Bounty Program](https://developer.apple.com/security-bounty/)
  * [Security Research Device Program](https://developer.apple.com/programs/security-research-device/)


###  Events 
Toggle Menu 
  * [Meet with Apple](https://developer.apple.com/events/)
  * [Apple Developer Centers](https://developer.apple.com/events/developer-centers/)
  * [App Store Awards](https://developer.apple.com/app-store/app-store-awards/)
  * [Apple Design Awards](https://developer.apple.com/design/awards/)
  * [Apple Developer Academies](https://developer.apple.com/academies/)
  * [WWDC](https://developer.apple.com/wwdc/)


To submit feedback on documentation, visit [Feedback Assistant](applefeedback://new?form_identifier=developertools.fba&answers%5B%3Aarea%5D=seedADC%3Adevpubs&answers%5B%3Adoc_type_req%5D=Technology%20Documentation&answers%5B%3Adocumentation_link_req%5D=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FUIKit%2Fdisplay-text-with-a-custom-layout).
Select a color scheme preference
Light
Dark
Auto
Copyright © 2025 [Apple Inc.](https://www.apple.com) All rights reserved. 
[ Terms of Use ](https://www.apple.com/legal/internet-services/terms/site.html)[ Privacy Policy ](https://www.apple.com/legal/privacy/)[ Agreements and Guidelines ](https://developer.apple.com/support/terms/)
