Source: https://developer.apple.com/documentation/Foundation/NSMetadataQuery

[ Skip Navigation ](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#app-main)
  * [Global Nav Open Menu](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#ac-gn-menustate)[Global Nav Close Menu](https://developer.apple.com/documentation/Foundation/NSMetadataQuery)
  * [Apple Developer](https://developer.apple.com/)


[ Search Developer Cancel  ](https://developer.apple.com/search/)
  * [Apple Developer](https://developer.apple.com/)
  * [News](https://developer.apple.com/news/)
  * [Discover](https://developer.apple.com/discover/)
  * [Design](https://developer.apple.com/design/)
  * [Develop](https://developer.apple.com/develop/)
  * [Distribute](https://developer.apple.com/distribute/)
  * [Support](https://developer.apple.com/support/)
  * [Account](https://developer.apple.com/account/)
  * [](https://developer.apple.com/search/)


Cancel 
Only search within “Documentation”
### Quick Links
  * [Downloads](https://developer.apple.com/download/)
  * [Documentation](https://developer.apple.com/documentation/)
  * [Sample Code](https://developer.apple.com/documentation/samplecode/)
  * [Videos](https://developer.apple.com/videos/)
  * [Forums](https://developer.apple.com/forums/)

5 Quick Links
[ Documentation ](https://developer.apple.com/documentation)
[ Open Menu ](https://developer.apple.com/documentation/Foundation/NSMetadataQuery)
  * SwiftLanguage:  Swift  Objective-C 
Language: 
    * Swift 
    * [ Objective-C ](https://developer.apple.com/documentation/Foundation/NSMetadataQuery)


[](https://developer.apple.com/documentation/Foundation/NSMetadataQuery)
## [ Foundation  ](https://developer.apple.com/documentation/foundation)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
11 of 42 symbols inside 1026620277 [var isStarted: Bool](https://developer.apple.com/documentation/foundation/nsmetadataquery/isstarted)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
15 of 64 symbols inside <root> containing 45 symbols[Scripting Support](https://developer.apple.com/documentation/foundation/scripting-support)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
16 of 64 symbols inside <root>
Files and Data Persistence
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
17 of 64 symbols inside <root> containing 17 symbols[File System](https://developer.apple.com/documentation/foundation/file-system)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
18 of 64 symbols inside <root> containing 32 symbols[Archives and Serialization](https://developer.apple.com/documentation/foundation/archives-and-serialization)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
19 of 64 symbols inside <root> containing 8 symbols[Settings](https://developer.apple.com/documentation/foundation/settings)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
Collection
20 of 64 symbols inside <root> containing 5 symbols[Spotlight](https://developer.apple.com/documentation/foundation/spotlight)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
1 of 5 symbols inside -932439131 
Queries
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
C
2 of 5 symbols inside -932439131 containing 42 symbols[NSMetadataQuery](https://developer.apple.com/documentation/foundation/nsmetadataquery)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
1 of 42 symbols inside 1026620277 
Configuring Queries
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
2 of 42 symbols inside 1026620277 [var searchScopes: [Any]](https://developer.apple.com/documentation/foundation/nsmetadataquery/searchscopes)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
3 of 42 symbols inside 1026620277 [var predicate: NSPredicate?](https://developer.apple.com/documentation/foundation/nsmetadataquery/predicate)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
4 of 42 symbols inside 1026620277 [var sortDescriptors: [NSSortDescriptor]](https://developer.apple.com/documentation/foundation/nsmetadataquery/sortdescriptors)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
5 of 42 symbols inside 1026620277 [var valueListAttributes: [String]](https://developer.apple.com/documentation/foundation/nsmetadataquery/valuelistattributes)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
6 of 42 symbols inside 1026620277 [var groupingAttributes: [String]?](https://developer.apple.com/documentation/foundation/nsmetadataquery/groupingattributes)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
7 of 42 symbols inside 1026620277 [var notificationBatchingInterval: TimeInterval](https://developer.apple.com/documentation/foundation/nsmetadataquery/notificationbatchinginterval)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
8 of 42 symbols inside 1026620277 [var delegate: (any NSMetadataQueryDelegate)?](https://developer.apple.com/documentation/foundation/nsmetadataquery/delegate)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
9 of 42 symbols inside 1026620277 [var searchItems: [Any]?](https://developer.apple.com/documentation/foundation/nsmetadataquery/searchitems)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
10 of 42 symbols inside 1026620277 
Running Queries
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
11 of 42 symbols inside 1026620277 [var isStarted: Bool](https://developer.apple.com/documentation/foundation/nsmetadataquery/isstarted)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
M
12 of 42 symbols inside 1026620277 [func start() -> Bool](https://developer.apple.com/documentation/foundation/nsmetadataquery/start\(\))
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
13 of 42 symbols inside 1026620277 [var isGathering: Bool](https://developer.apple.com/documentation/foundation/nsmetadataquery/isgathering)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
14 of 42 symbols inside 1026620277 [var isStopped: Bool](https://developer.apple.com/documentation/foundation/nsmetadataquery/isstopped)
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
M
15 of 42 symbols inside 1026620277 [func stop()](https://developer.apple.com/documentation/foundation/nsmetadataquery/stop\(\))
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
16 of 42 symbols inside 1026620277 
Getting Query Results
To navigate the symbols, press Up Arrow, Down Arrow, Left Arrow or Right Arrow 
P
17 of 42 symbols inside 1026620277 [var results: [Any]](https://developer.apple.com/documentation/foundation/nsmetadataquery/results)
111 items were found. Tab back to navigate through them. 
/ 
Navigator is ready 
  * [ Foundation ](https://developer.apple.com/documentation/foundation)
  * [ NSMetadataQuery ](https://developer.apple.com/documentation/Foundation/NSMetadataQuery)
  *     * NSMetadataQuery 


Class
# NSMetadataQuery
A query that you perform against Spotlight metadata.
iOS 5.0+iPadOS 5.0+Mac Catalyst 13.1+macOS 10.4+tvOS 9.0+visionOS 1.0+watchOS 2.0+
```
class NSMetadataQuery
```

## [Overview](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#overview)
The [`NSMetadataQuery`](https://developer.apple.com/documentation/foundation/nsmetadataquery) class encapsulates the functionality provided by the [MDQuery](https://developer.apple.com/documentation/coreservices/file_metadata/mdquery) opaque type for querying the Spotlight metadata.
[`NSMetadataQuery`](https://developer.apple.com/documentation/foundation/nsmetadataquery) objects provide metadata query results in several ways:
  * As individual attribute values for requested attributes.
  * As value lists that contain the distinct values for given attributes in the query results.
  * As a result array proxy, containing all the query results. This is suitable for use with Cocoa bindings.
  * As a hierarchical collection of results, grouping together items with the same values for specified grouping attributes. This is also suitable for use with Cocoa bindings.


Queries have two phases: the initial gathering phase that collects all currently matching results and a second live-update phase.
By default, the receiver has no limitation on its search scope. Use the [`searchScopes`](https://developer.apple.com/documentation/foundation/nsmetadataquery/searchscopes) property to customize.
By default, notification of updated results occurs at 1.0 seconds. Use the [`notificationBatchingInterval`](https://developer.apple.com/documentation/foundation/nsmetadataquery/notificationbatchinginterval) property to customize.
You must set a predicate with the [`predicate`](https://developer.apple.com/documentation/foundation/nsmetadataquery/predicate) property before starting a query.
## [Topics](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#topics)
### [Configuring Queries](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#Configuring-Queries)
[`var searchScopes: [Any]`](https://developer.apple.com/documentation/foundation/nsmetadataquery/searchscopes)
An array containing the search scopes.
[`var predicate: NSPredicate?`](https://developer.apple.com/documentation/foundation/nsmetadataquery/predicate)
The predicate used to filter query results.
[`var sortDescriptors: [NSSortDescriptor]`](https://developer.apple.com/documentation/foundation/nsmetadataquery/sortdescriptors)
An array of sort descriptor objects.
[`var valueListAttributes: [String]`](https://developer.apple.com/documentation/foundation/nsmetadataquery/valuelistattributes)
An array of attributes whose values are gathered by the query.
[`var groupingAttributes: [String]?`](https://developer.apple.com/documentation/foundation/nsmetadataquery/groupingattributes)
An array of grouping attributes. (read-only)
[`var notificationBatchingInterval: TimeInterval`](https://developer.apple.com/documentation/foundation/nsmetadataquery/notificationbatchinginterval)
The interval at which notification of updated results occurs.
[`var delegate: (any NSMetadataQueryDelegate)?`](https://developer.apple.com/documentation/foundation/nsmetadataquery/delegate)
The query’s delegate.
[`var searchItems: [Any]?`](https://developer.apple.com/documentation/foundation/nsmetadataquery/searchitems)
An array of objects that define the query’s scope.
### [Running Queries](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#Running-Queries)
[`var isStarted: Bool`](https://developer.apple.com/documentation/foundation/nsmetadataquery/isstarted)
A Boolean value that indicates whether the query has started. (read-only)
[`func start() -> Bool`](https://developer.apple.com/documentation/foundation/nsmetadataquery/start\(\))
Attempts to start the query.
[`var isGathering: Bool`](https://developer.apple.com/documentation/foundation/nsmetadataquery/isgathering)
A Boolean value that indicates whether the receiver is in the initial gathering phase of the query. (read-only)
[`var isStopped: Bool`](https://developer.apple.com/documentation/foundation/nsmetadataquery/isstopped)
A Boolean value that indicates whether the query has stopped.
[`func stop()`](https://developer.apple.com/documentation/foundation/nsmetadataquery/stop\(\))
Stops the receiver’s current query from gathering any further results.
### [Getting Query Results](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#Getting-Query-Results)
[`var results: [Any]`](https://developer.apple.com/documentation/foundation/nsmetadataquery/results)
An array containing the query’s results.
[`var resultCount: Int`](https://developer.apple.com/documentation/foundation/nsmetadataquery/resultcount)
The number of results returned by the query. (read-only)
[`func result(at: Int) -> Any`](https://developer.apple.com/documentation/foundation/nsmetadataquery/result\(at:\))
Returns the query result at a specific index.
[`func index(ofResult: Any) -> Int`](https://developer.apple.com/documentation/foundation/nsmetadataquery/index\(ofresult:\))
Returns the index of a query result object in the receiver’s results array.
[`var groupedResults: [NSMetadataQueryResultGroup]`](https://developer.apple.com/documentation/foundation/nsmetadataquery/groupedresults)
An array containing hierarchical groups of query results. (read-only)
[`class NSMetadataQueryResultGroup`](https://developer.apple.com/documentation/foundation/nsmetadataqueryresultgroup)
The `NSMetadataQueryResultGroup` class represents a collection of grouped attribute results returned by an [`NSMetadataQuery`](https://developer.apple.com/documentation/foundation/nsmetadataquery) object.
[`func enumerateResults((Any, Int, UnsafeMutablePointer<ObjCBool>) -> Void)`](https://developer.apple.com/documentation/foundation/nsmetadataquery/enumerateresults\(_:\))
Enumerates the current set of results using the given block.
[`func enumerateResults(options: NSEnumerationOptions, using: (Any, Int, UnsafeMutablePointer<ObjCBool>) -> Void)`](https://developer.apple.com/documentation/foundation/nsmetadataquery/enumerateresults\(options:using:\))
Enumerates the current set of results using the given options and block.
[`var valueLists: [String : [NSMetadataQueryAttributeValueTuple]]`](https://developer.apple.com/documentation/foundation/nsmetadataquery/valuelists)
A dictionary containing the value lists generated by the query.
[`class NSMetadataQueryAttributeValueTuple`](https://developer.apple.com/documentation/foundation/nsmetadataqueryattributevaluetuple)
The `NSMetadataQueryAttributeValueTuple` class represents attribute-value tuples, which are objects that contain the attribute name and value of a metadata attribute.
[`func value(ofAttribute: String, forResultAt: Int) -> Any?`](https://developer.apple.com/documentation/foundation/nsmetadataquery/value\(ofattribute:forresultat:\))
Returns the value for the attribute name `attrName` at the index in the results specified by `idx`.
[`func enableUpdates()`](https://developer.apple.com/documentation/foundation/nsmetadataquery/enableupdates\(\))
Enables updates to the query results.
[`func disableUpdates()`](https://developer.apple.com/documentation/foundation/nsmetadataquery/disableupdates\(\))
Disables updates to the query results.
[`var operationQueue: OperationQueue?`](https://developer.apple.com/documentation/foundation/nsmetadataquery/operationqueue)
The queue on which query result notifications are posted.
### [Constants](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#Constants)
[API Reference Metadata Query Search Scopes](https://developer.apple.com/documentation/foundation/metadata-query-search-scopes)
Constants for the predefined search scopes used by [`searchScopes`](https://developer.apple.com/documentation/foundation/nsmetadataquery/searchscopes).
[API Reference Content Relevance](https://developer.apple.com/documentation/foundation/content-relevance)
In addition to including the requested metadata attributes, a query result also includes content relevance, accessed with the following key.
[API Reference Keys for Use with a Notification Info Dictionary](https://developer.apple.com/documentation/foundation/keys-for-use-with-a-notification-info-dictionary)
Constants for keys to retrieve the collection of changed items from a notification’s user info dictionary.
### [Notifications](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#Notifications)
[`static let NSMetadataQueryDidFinishGathering: NSNotification.Name`](https://developer.apple.com/documentation/foundation/nsnotification/name-swift.struct/nsmetadataquerydidfinishgathering)
Posted when the receiver has finished with the initial result-gathering phase of the query.
[`static let NSMetadataQueryDidStartGathering: NSNotification.Name`](https://developer.apple.com/documentation/foundation/nsnotification/name-swift.struct/nsmetadataquerydidstartgathering)
Posted when the receiver begins with the initial result-gathering phase of the query.
[`static let NSMetadataQueryDidUpdate: NSNotification.Name`](https://developer.apple.com/documentation/foundation/nsnotification/name-swift.struct/nsmetadataquerydidupdate)
Posted when the receiver’s results have changed during the live-update phase of the query.
[`static let NSMetadataQueryGatheringProgress: NSNotification.Name`](https://developer.apple.com/documentation/foundation/nsnotification/name-swift.struct/nsmetadataquerygatheringprogress)
Posted as the receiver is collecting results during the initial result-gathering phase of the query.
### [Structures](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#Structures)
[`struct DidFinishGatheringMessage`](https://developer.apple.com/documentation/foundation/nsmetadataquery/didfinishgatheringmessage)
[`struct DidStartGatheringMessage`](https://developer.apple.com/documentation/foundation/nsmetadataquery/didstartgatheringmessage)
## [Relationships](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#relationships)
### [Inherits From](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#inherits-from)
  * [`NSObject`](https://developer.apple.com/documentation/ObjectiveC/NSObject-swift.class)


### [Conforms To](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#conforms-to)
  * [`CVarArg`](https://developer.apple.com/documentation/Swift/CVarArg)
  * [`CustomDebugStringConvertible`](https://developer.apple.com/documentation/Swift/CustomDebugStringConvertible)
  * [`CustomStringConvertible`](https://developer.apple.com/documentation/Swift/CustomStringConvertible)
  * [`Equatable`](https://developer.apple.com/documentation/Swift/Equatable)
  * [`Hashable`](https://developer.apple.com/documentation/Swift/Hashable)
  * [`NSObjectProtocol`](https://developer.apple.com/documentation/ObjectiveC/NSObjectProtocol)


## [See Also](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#see-also)
### [File Search](https://developer.apple.com/documentation/Foundation/NSMetadataQuery#File-Search)
[`protocol NSMetadataQueryDelegate`](https://developer.apple.com/documentation/foundation/nsmetadataquerydelegate)
An interface that enables the delegate of a metadata query to provide substitute results or attributes.
[`class NSMetadataItem`](https://developer.apple.com/documentation/foundation/nsmetadataitem)
The metadata associated with a file.
Current page is NSMetadataQuery 
[Apple](https://www.apple.com)
  1. [Developer](https://developer.apple.com/)
  2. [ Documentation ](https://developer.apple.com/documentation/)


###  Platforms 
Toggle Menu 
  * [iOS](https://developer.apple.com/ios/)
  * [iPadOS](https://developer.apple.com/ipados/)
  * [macOS](https://developer.apple.com/macos/)
  * [tvOS](https://developer.apple.com/tvos/)
  * [visionOS](https://developer.apple.com/visionos/)
  * [watchOS](https://developer.apple.com/watchos/)


###  Tools 
Toggle Menu 
  * [Swift](https://developer.apple.com/swift/)
  * [SwiftUI](https://developer.apple.com/swiftui/)
  * [Swift Playground](https://developer.apple.com/swift-playground/)
  * [TestFlight](https://developer.apple.com/testflight/)
  * [Xcode](https://developer.apple.com/xcode/)
  * [Xcode Cloud](https://developer.apple.com/xcode-cloud/)
  * [SF Symbols](https://developer.apple.com/sf-symbols/)


###  Topics & Technologies 
Toggle Menu 
  * [Accessibility](https://developer.apple.com/accessibility/)
  * [Accessories](https://developer.apple.com/accessories/)
  * [App Extension](https://developer.apple.com/app-extensions/)
  * [App Store](https://developer.apple.com/app-store/)
  * [Audio & Video](https://developer.apple.com/audio/)
  * [Augmented Reality](https://developer.apple.com/augmented-reality/)
  * [Design](https://developer.apple.com/design/)
  * [Distribution](https://developer.apple.com/distribute/)
  * [Education](https://developer.apple.com/education/)
  * [Fonts](https://developer.apple.com/fonts/)
  * [Games](https://developer.apple.com/games/)
  * [Health & Fitness](https://developer.apple.com/health-fitness/)
  * [In-App Purchase](https://developer.apple.com/in-app-purchase/)
  * [Localization](https://developer.apple.com/localization/)
  * [Maps & Location](https://developer.apple.com/maps/)
  * [Machine Learning & AI](https://developer.apple.com/machine-learning/)
  * [Open Source](https://opensource.apple.com/)
  * [Security](https://developer.apple.com/security/)
  * [Safari & Web](https://developer.apple.com/safari/)


###  Resources 
Toggle Menu 
  *   * [Documentation](https://developer.apple.com/documentation/)
  * [Tutorials](https://developer.apple.com/learn/)
  * [Downloads](https://developer.apple.com/download/)
  * [Forums](https://developer.apple.com/forums/)
  * [Videos](https://developer.apple.com/videos/)


###  Support 
Toggle Menu 
  * [Support Articles](https://developer.apple.com/support/articles/)
  * [Contact Us](https://developer.apple.com/contact/)
  * [Bug Reporting](https://developer.apple.com/bug-reporting/)
  * [System Status](https://developer.apple.com/system-status/)


###  Account 
Toggle Menu 
  * [Apple Developer](https://developer.apple.com/account/)
  * [App Store Connect](https://appstoreconnect.apple.com/)
  * [Certificates, IDs, & Profiles](https://developer.apple.com/account/ios/certificate/)
  * [Feedback Assistant](https://feedbackassistant.apple.com/)


###  Programs 
Toggle Menu 
  * [Apple Developer Program](https://developer.apple.com/programs/)
  * [Apple Developer Enterprise Program](https://developer.apple.com/programs/enterprise/)
  * [App Store Small Business Program](https://developer.apple.com/app-store/small-business-program/)
  * [MFi Program](https://mfi.apple.com/)
  * [News Partner Program](https://developer.apple.com/programs/news-partner/)
  * [Video Partner Program](https://developer.apple.com/programs/video-partner/)
  * [Security Bounty Program](https://developer.apple.com/security-bounty/)
  * [Security Research Device Program](https://developer.apple.com/programs/security-research-device/)


###  Events 
Toggle Menu 
  * [Meet with Apple](https://developer.apple.com/events/)
  * [Apple Developer Centers](https://developer.apple.com/events/developer-centers/)
  * [App Store Awards](https://developer.apple.com/app-store/app-store-awards/)
  * [Apple Design Awards](https://developer.apple.com/design/awards/)
  * [Apple Developer Academies](https://developer.apple.com/academies/)
  * [WWDC](https://developer.apple.com/wwdc/)


To submit feedback on documentation, visit [Feedback Assistant](applefeedback://new?form_identifier=developertools.fba&answers%5B%3Aarea%5D=seedADC%3Adevpubs&answers%5B%3Adoc_type_req%5D=Technology%20Documentation&answers%5B%3Adocumentation_link_req%5D=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FFoundation%2FNSMetadataQuery).
Select a color scheme preference
Light
Dark
Auto
Copyright © 2025 [Apple Inc.](https://www.apple.com) All rights reserved. 
[ Terms of Use ](https://www.apple.com/legal/internet-services/terms/site.html)[ Privacy Policy ](https://www.apple.com/legal/privacy/)[ Agreements and Guidelines ](https://developer.apple.com/support/terms/)
